window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){return a(t[r][1][e]||e)},p,p.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AchievementCell:[function(e,t,n){"use strict";cc._RF.push(t,"53a0bET1cNAdZX5JrXPoWbD","AchievementCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setData=function(e,t,n){this._callback=n,this._index=t,this.description.string=""+r.default.instance.replaceTextQuest(e.Text,e.NumberTarget),this.price.string=""+e.Bonus;var o=this;cc.resources.load("Avatar/"+e.Sprite,cc.SpriteFrame,function(e,t){o.setFrame(t)});var a=r.default.instance.data_setting.countAchievement[e.Type];this.progress.progress=a/e.NumberTarget,this.valueProcess.string=a+"/"+e.NumberTarget;var i=a>=e.NumberTarget,s=r.default.instance.data_setting.saveAchComplete.includes(e.Type);this.claimBtn.interactable=!s&&i,s&&(this.price.string="Received")},t.prototype.setFrame=function(e){null!=e&&null!=e&&(this.avatar.spriteFrame=e)},t.prototype.onClainBtnClick=function(){r.default.instance.data_setting.saveAchComplete.push(this._data.Type),c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),null!=this._callback&&this._callback(this._index)},i([u(cc.Sprite)],t.prototype,"avatar",void 0),i([u(cc.Label)],t.prototype,"description",void 0),i([u(cc.Label)],t.prototype,"valueProcess",void 0),i([u(cc.Label)],t.prototype,"price",void 0),i([u(cc.ProgressBar)],t.prototype,"progress",void 0),i([u(cc.Button)],t.prototype,"claimBtn",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],AchievementItem:[function(e,t,n){"use strict";cc._RF.push(t,"3ba4d9wYiZFDYl6F5hCxeK2","AchievementItem");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AchievementItem=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return o([i],e)}());n.AchievementItem=r,cc._RF.pop()},{}],AchievementPopup:[function(e,t,n){"use strict";cc._RF.push(t,"74abdsBqF9IOLBSBUsG0rjW","AchievementPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../UI/ResourceItem"),c=e("../Unit/Constants"),l=e("../Unit/Utils"),p=e("./AchievementCell"),u=cc._decorator,d=u.ccclass,f=u.property,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnable=function(){this.loadUI()},t.prototype.loadUI=function(){var e=this;this.grid.destroyAllChildren();for(var t=0;t<r.default.instance.AchievementsData.length;t++){var n=cc.instantiate(this.prefab);n.getComponent(p.default).setData(r.default.instance.AchievementsData[t],t,function(t){return e.checkClaim(t)}),n.parent=this.grid}var o=r.default.instance.data_setting.saveAchComplete.length;this.progress.progress=o/10,this.numQComplete.string=o+"/10",this.resourceUI.updateUI()},t.prototype.checkClaim=function(e){r.default.instance.AchievementsData[e].NumberTemp=1,this.checkReceivedSkin(),this.loadUI()},t.prototype.checkReceivedSkin=function(){var e=r.default.instance.data_setting.saveAchComplete.length;e>=3&&(r.default.instance.data_setting.listHero.includes(21)||(r.default.instance.data_setting.listHero.push(21),l.Utils.saveData(c.default.DATA_SETTING,r.default.instance.data_setting))),e>=6&&(r.default.instance.data_setting.listHero.includes(19)||(r.default.instance.data_setting.listHero.push(19),l.Utils.saveData(c.default.DATA_SETTING,r.default.instance.data_setting))),e>=9&&(r.default.instance.data_setting.listHero.includes(20)||(r.default.instance.data_setting.listHero.push(20),l.Utils.saveData(c.default.DATA_SETTING,r.default.instance.data_setting)))},i([f(cc.Node)],t.prototype,"grid",void 0),i([f(cc.Prefab)],t.prototype,"prefab",void 0),i([f(cc.Label)],t.prototype,"numQComplete",void 0),i([f(cc.ProgressBar)],t.prototype,"progress",void 0),i([f(s.default)],t.prototype,"resourceUI",void 0),i([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../UI/ResourceItem":"ResourceItem","../Unit/Constants":"Constants","../Unit/Utils":"Utils","./AchievementCell":"AchievementCell"}],AnimHammer:[function(e,t,n){"use strict";cc._RF.push(t,"cf342Mb8oNOuZaMA6GJ8X4I","AnimHammer");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnable=function(){cc.tween(this.node).repeat(10,cc.tween().to(.3,{angle:45}).to(.3,{angle:0})).start()},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],AnimPopup:[function(e,t,n){"use strict";cc._RF.push(t,"6336axlS89B7obaAZhMvgLg","AnimPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnable=function(){this.node.scale=0,cc.tween(this.node).to(.2,{scale:1}).start()},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"aae995obrxPr5l4OABdr7Yk","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioManager=void 0;var o=e("../Unit/Utils"),a=e("./GameManager"),i=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.load=function(e){var t=this;cc.loader.loadResDir("Audio",cc.AudioClip,function(n,a){n?o.Utils.log("load sound: "+JSON.stringify(n)):a.map(function(e){"Ingame-bg"===e.name?(t.ingame_bg=e,t.playMusic()):"BackgroundCastle"===e.name?t.BackgroundCastle=e:"BackgroundHome"===e.name?t.BackgroundHome=e:"BlockWallBreak"===e.name?t.BlockWallBreak=e:"BuildItem"===e.name?t.BuildItem=e:"ButtonClick"===e.name?t.ButtonClick=e:"CoinMove"===e.name?t.CoinMove=e:"Demon_Punch"===e.name?t.Demon_Punch=e:"Enemy die 1"===e.name?t.Enemy_die_1=e:"Enemy die 2"===e.name?t.Enemy_die_2=e:"Enemy die 3"===e.name?t.Enemy_die_3=e:"EnemyCut"===e.name?t.EnemyCut=e:"EnemyDie"===e.name?t.EnemyDie=e:"EnemyHit"===e.name?t.EnemyHit=e:"HeroDrag"===e.name?t.HeroDrag=e:"HeroDie"===e.name?t.HeroDie=e:"HeroHit"===e.name?t.HeroHit=e:"HeroPickSword"===e.name?t.HeroPickSword=e:"HeroUpLevel"===e.name?t.HeroUpLevel=e:"HeroYeah"===e.name?t.HeroYeah=e:"level_Down"===e.name?t.level_Down=e:"Lose"===e.name?t.Lose=e:"OpenChest"===e.name?t.OpenChest=e:"pick sword"===e.name?t.pick_sword=e:"punch 1"===e.name?t.punch_1=e:"punch 2"===e.name?t.punch_2=e:"punch 3"===e.name?t.punch_3=e:"push-wall-block"===e.name?t.push_wall_block=e:"RescuePrincess"===e.name?t.RescuePrincess=e:"Sword Attack 2"===e.name?t.Sword_Attack_2=e:"Sword Slash A"===e.name?t.Sword_Slash_A=e:"Water Drop 1"===e.name?t.Water_Drop_1=e:"Win"===e.name?t.Win=e:"Wolf Bite"===e.name?t.Wolf_Bite=e:"Wolf Die"===e.name&&(t.Wolf_Die=e)}),e()}),cc.audioEngine.setEffectsVolume(1)},e.prototype.isPlayMusic=function(){return cc.audioEngine.isMusicPlaying()},e.prototype.playMusic=function(){cc.audioEngine.playMusic(this.ingame_bg,!0)},e.prototype.playHomeMusic=function(){var e=a.default.instance.data_setting;this.pauseMusic(),e.mute||e.muteSound?this.pauseMusic():this.isPlayMusic()?cc.audioEngine.resumeMusic():cc.audioEngine.playMusic(this.BackgroundHome,!0)},e.prototype.resumeMusic=function(){var e=a.default.instance.data_setting;e.mute||(cc.audioEngine.stopAllEffects(),this.isPlayMusic()?cc.audioEngine.resumeMusic():e.muteSound||cc.audioEngine.playMusic(this.ingame_bg,!0))},e.prototype.resumeHomeMusic=function(){var e=a.default.instance.data_setting;this.pauseMusic(),e.mute||(cc.audioEngine.stopAllEffects(),this.isPlayMusic()?cc.audioEngine.resumeMusic():e.muteSound||cc.audioEngine.playMusic(this.BackgroundHome,!0))},e.prototype.pauseMusic=function(){cc.audioEngine.pauseMusic()},e.prototype._playSFX=function(e){a.default.instance.data_setting.mute||cc.audioEngine.playEffect(e,!1)},e.prototype.PlayBackgroundCastle=function(){this._playSFX(this.BackgroundCastle)},e.prototype.PlayBackgroundHome=function(){this._playSFX(this.BackgroundHome)},e.prototype.PlayBlockWallBreak=function(){this._playSFX(this.BlockWallBreak)},e.prototype.PlayBuildItem=function(){this._playSFX(this.BuildItem)},e.prototype.PlayButtonClick=function(){this._playSFX(this.ButtonClick)},e.prototype.PlayCoinMove=function(){this._playSFX(this.CoinMove)},e.prototype.PlayDemon_Punch=function(){this._playSFX(this.Demon_Punch)},e.prototype.PlayEnemy_die_1=function(){this._playSFX(this.Enemy_die_1)},e.prototype.PlayEnemy_die_2=function(){this._playSFX(this.Enemy_die_2)},e.prototype.PlayEnemy_die_3=function(){this._playSFX(this.Enemy_die_3)},e.prototype.PlayEnemyCut=function(){this._playSFX(this.EnemyCut)},e.prototype.PlayEnemyDie=function(){this._playSFX(this.EnemyDie)},e.prototype.PlayEnemyHit=function(){this._playSFX(this.EnemyHit)},e.prototype.PlayHeroDie=function(){this._playSFX(this.HeroDie)},e.prototype.PlayHeroDrag=function(){this._playSFX(this.HeroDrag)},e.prototype.PlayHeroHit=function(){this._playSFX(this.HeroHit)},e.prototype.PlayHeroPickSword=function(){this._playSFX(this.HeroPickSword)},e.prototype.PlayHeroUpLevel=function(){this._playSFX(this.HeroUpLevel)},e.prototype.PlayHeroYeah=function(){this._playSFX(this.HeroYeah)},e.prototype.Playlevel_Down=function(){this._playSFX(this.level_Down)},e.prototype.PlayLose=function(){this._playSFX(this.Lose)},e.prototype.PlayOpenChest=function(){this._playSFX(this.OpenChest)},e.prototype.PlayPick_sword=function(){this._playSFX(this.pick_sword)},e.prototype.PlayPunch_1=function(){this._playSFX(this.punch_1)},e.prototype.PlayPunch_2=function(){this._playSFX(this.punch_2)},e.prototype.PlayPunch_3=function(){this._playSFX(this.punch_3)},e.prototype.PlayPushwallblock=function(){this._playSFX(this.push_wall_block)},e.prototype.PlayRescuePrincess=function(){this._playSFX(this.RescuePrincess)},e.prototype.PlaySword_Attack_2=function(){this._playSFX(this.Sword_Attack_2)},e.prototype.PlaySword_Slash_A=function(){this._playSFX(this.Sword_Slash_A)},e.prototype.PlayWin=function(){this._playSFX(this.Win)},e.prototype.PlayWolf_Bite=function(){this._playSFX(this.Wolf_Bite)},e.prototype.PlayWolf_Die=function(){this._playSFX(this.Wolf_Die)},e._instance=null,e}();n.AudioManager=i,cc._RF.pop()},{"../Unit/Utils":"Utils","./GameManager":"GameManager"}],CastleCell:[function(e,t,n){"use strict";cc._RF.push(t,"2129bBIa1dIPInD7xro9Z2h","CastleCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.listPointProgress=[],t.price=0,t}return a(t,e),t.prototype.setData=function(e,t){this._callback=t,this._index=e;var n=r.default.instance.data_setting.caslteEarth[e],o="Map/Earth/earth-"+(e+1)+n,a="Map/Earth/earth-"+(e+1)+(n+1);this.price=500*n+500,this.priceLb.string=""+this.price,this.price<=r.default.instance.data_setting.gold?this.upgradeBtn.interactable=!0:this.upgradeBtn.interactable=!1;var i=this;if(cc.loader.loadRes(o,cc.SpriteFrame,function(e,t){null!=t&&(i.fromImg.spriteFrame=t)}),cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){null!=t&&(i.toImg.spriteFrame=t)}),5==n){this.fromImg.node.active=!1,this.toImg.node.active=!1,this.maxLevelImg.node.active=!0,this.completeTick.active=!0,this.upgradeBtn.node.active=!1,this.priceNode.active=!1;var s="Map/Earth/earth-"+(e+1)+5;cc.loader.loadRes(s,cc.SpriteFrame,function(e,t){null!=t&&(i.maxLevelImg.spriteFrame=t)}),this.arrow.active=!1}else if(0==n){this.fromImg.node.active=!1,this.toImg.node.active=!1,this.maxLevelImg.node.active=!0,this.upgradeBtn.node.active=!0,this.priceNode.active=!0,this.completeTick.active=!1,this.titleBtn.string="Build";var c="Map/Earth/earth-"+(e+1)+1;cc.loader.loadRes(c,cc.SpriteFrame,function(e,t){null!=t&&(i.maxLevelImg.spriteFrame=t)}),this.arrow.active=!1}else this.titleBtn.string="Upgrade",this.fromImg.sizeMode=cc.Sprite.SizeMode.TRIMMED,this.toImg.sizeMode=cc.Sprite.SizeMode.TRIMMED,this.fromImg.node.active=!0,this.toImg.node.active=!0,this.maxLevelImg.node.active=!1,this.completeTick.active=!1,this.upgradeBtn.node.active=!0,this.priceNode.active=!0;this.progressBar.progress=n/4;for(var l=0;l<n;l++)this.listPointProgress[l].spriteFrame=this.iconWin},t.prototype.onUpgradeBtn=function(){null!=this._callback&&(r.default.instance.data_setting.gold-=this.price,console.log("GameManager.instance.data_setting.gold ===== "+r.default.instance.data_setting.gold),c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),this._callback(this._index))},i([u(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([u(cc.Sprite)],t.prototype,"fromImg",void 0),i([u(cc.Sprite)],t.prototype,"toImg",void 0),i([u(cc.Button)],t.prototype,"upgradeBtn",void 0),i([u(cc.Sprite)],t.prototype,"maxLevelImg",void 0),i([u(cc.Node)],t.prototype,"completeTick",void 0),i([u(cc.Label)],t.prototype,"priceLb",void 0),i([u(cc.Label)],t.prototype,"titleBtn",void 0),i([u(cc.Node)],t.prototype,"priceNode",void 0),i([u(cc.Node)],t.prototype,"arrow",void 0),i([u(cc.Sprite)],t.prototype,"listPointProgress",void 0),i([u(cc.SpriteFrame)],t.prototype,"iconWin",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],CastlePopup:[function(e,t,n){"use strict";cc._RF.push(t,"3e40dLDDDxNaZOB+r+tEO64","CastlePopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t.itemPrefab=null,t}return a(t,e),t.prototype.onEnable=function(){this.loadUi()},t.prototype.loadUi=function(){var e=this;this.root&&this.itemPrefab&&this.root.destroyAllChildren();for(var t=0;t<=6;t++){var n=cc.instantiate(this.itemPrefab);this.root.addChild(n),n.getComponent("CastleCell").setData(t,function(t){e.upgradeEvent(t)})}},t.prototype.upgradeEvent=function(e){this.node.active=!1,r.default.instance.worldPopup.buildCastle(e)},t.prototype.onBackBtn=function(){this.node.active=!1},i([l(cc.Node)],t.prototype,"root",void 0),i([l(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],Castle:[function(e,t,n){"use strict";cc._RF.push(t,"21737b2M3hDDJ6fka3xqDtL","Castle");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Castle=void 0;var a=cc._decorator,i=a.ccclass,r=a.property,s=function(){function e(){}return e.prototype.start=function(){},e.prototype.loadUI=function(){},o([r(cc.Sprite)],e.prototype,"fromImg",void 0),o([r(cc.Sprite)],e.prototype,"toImg",void 0),o([r(cc.Button)],e.prototype,"upGradeBtn",void 0),o([r(cc.Label)],e.prototype,"costLb",void 0),o([r(cc.Sprite)],e.prototype,"doneIcon",void 0),o([r(cc.Sprite)],e.prototype,"arrow",void 0),o([i],e)}();n.Castle=s,cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"b53a8kTqeFBc42xaSDaHbai","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;var o=function(){function e(){}return e.assetUrls=["Prefabs/EnemyType/EnemyNormal","Prefabs/EnemyType/EnemySword","Prefabs/EnemyType/Archery","Prefabs/EnemyType/Demon","Prefabs/EnemyType/Chest","Prefabs/EnemyType/Dragun","Prefabs/EnemyType/Ghost","Prefabs/EnemyType/Princess","Prefabs/EnemyType/Trap","Prefabs/EnemyType/Wolf","Prefabs/EnemyType/Sword","Prefabs/EnemyType/wall","Prefabs/EnemyType/Ruou","Prefabs/EnemyType/Fire","Prefabs/EnemyType/Spider","Prefabs/EnemyType/Yeti","Prefabs/EnemyType/EnemyHorn","Prefabs/EnemyType/DragonGold","Prefabs/EnemyType/Shield","Prefabs/EnemyType/PrincessLock","Prefabs/EnemyType/Bear","Prefabs/EnemyType/PoliceStick"],e}();n.Config=o,cc._RF.pop()},{}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"8055f+FXMhCi484jSsYQJlx","Constants");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TypeAchievement=n.TypeDailyQuest=n.LibraryData=n.listWorld=n.WorldType=n.ShareType=n.AdsType=n.MessageType=n.SettingType=n.typeEnemy=n.GameState=n.HeroAnimation=n.HeroSkin=void 0;var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.GAME_SCENE="GameScene",t.TUTORIAL_SCENE="TutorialScene",t.HOME_SCENE="HomeScene",t.DATA_SETTING="setting",t.LIST_HERO="listHero",t.DATA="data",t.DEV=!1,t.TEST=!1,t.ADS=!1,t.TOKEN="808756926439867|ukC-sH5QzkMn_wXvBj3F0opbY5s",t.INTERSTITIAL_ID="808756926439867_812177752764451",t.VIDEO_ID="808756926439867_812292759419617",i([s],t)}(cc.Component));n.default=c,function(e){e.GLOVES="Gloves",e.HERO1="Hero1",e.HERO2="Hero2",e.HERO3="Hero3",e.HERO4="Hero4",e.HERO5="Hero5",e.HERO6="Hero6",e.HERO7="Hero7",e.HERO8="Hero8",e.HERO9="Hero9",e.HERO10="Hero10",e.HERO11="Hero11",e.HERO12="Hero12",e.HERO13="Hero13",e.HERO14="Hero14",e.KIEM="Kiem",e.KIEM2="Kiem2",e.KNIFE="Knife"}(n.HeroSkin||(n.HeroSkin={})),function(e){e.Attack="Attack",e.Attack2="Attack2",e.AttackGlove="AttackGlove",e.AttackHit="AttackHit",e.AttackKnife="AttackKnife",e.AttackSword="AttackSword",e.Die="Die",e.Die2="Die2",e.DieFire="DieFire",e.HitWall="HitWall",e.Idle="Idle",e.Open1="Open1",e.Open2="Open2",e.Pick="Pick",e.Run="Run",e.RunKiem="RunKiem",e.Sit="Sit",e.TelePort="TelePort",e.Win="Win",e.Win2="Win2",e.NhayMat="nhay mat"}(n.HeroAnimation||(n.HeroAnimation={})),n.GameState={None:0,Playing:1,GameOver:2,Victory:3},n.typeEnemy={None:0,EnemyNormal:1,EnemySword:2,Archery:3,Demon:4,Chest:5,Dragun:6,Ghost:7,Princess:8,Trap:9,Wolf:10,Sword:11,Wall:12,Gold:13,Knife:14,Food:15,Shield:16,Yeti:17,EnemyHorn:18,Key:19,Fire:20,Spider:21,Ruou:22,DragonGold:23,Boxing:24,Boom:25,PrincessLock:26,Bear:27,PoliceStick:28,Bow:29,Goblin:30,Kappa:31,Axe:32,Shuriken:33,Katana:34,BloodSword:35,Hydra:36},function(e){e[e.Vibration=0]="Vibration",e[e.Music=1]="Music",e[e.Sound=2]="Sound"}(n.SettingType||(n.SettingType={})),function(e){e[e.NONE=0]="NONE",e[e.PLAY=1]="PLAY",e[e.PLAY_MATCH=2]="PLAY_MATCH"}(n.MessageType||(n.MessageType={})),function(e){e[e.INTERSTITIAL=0]="INTERSTITIAL",e[e.VIDEO=1]="VIDEO"}(n.AdsType||(n.AdsType={})),function(e){e[e.START_GAME=0]="START_GAME",e[e.END_GAME=1]="END_GAME",e[e.START_LEADERBOARD=2]="START_LEADERBOARD",e[e.END_LEADERBOARD=3]="END_LEADERBOARD"}(n.ShareType||(n.ShareType={})),n.WorldType={Earth:0,Desert:0,Iceland:0,Inferno:0,Jade:0,Olympus:0},n.listWorld=[{name:"world-earth",levelUnlock:0},{name:"world-desert",levelUnlock:200},{name:"world-inferno",levelUnlock:500},{name:"world-jade",levelUnlock:1e3},{name:"world-olympus",levelUnlock:1500},{name:"world-iceland",levelUnlock:2e3}],n.LibraryData=[{type:0,level:0,name:"Bazen Hero",description:"The hero comes from Demacia Kingdom. The princess of Demacia is kidnapped by monsters. He is on his way to rescue the princess and search for treasure in other empires."},{type:1,level:1,name:"Goblin",description:"They are small, mischievous, and greedy, especially for gold and jewelry. They deal small damage."},{type:14,level:4,name:"Iron Knife",description:"Iron Knife is a special knife forged in the Swar volcano, it causes the enemy to be injured and bleed continuously, irreparably."},{type:11,level:6,name:"Jade Sword",description:"Jade Sword is a sword forged by the best craftsmen in Jade. It causes a huge amount of damage."},{type:31,level:9,name:"Kappa",description:"Kappa are anthropomorphic reptiles live in rivers and streams. They can spit out powerful poisons that reduce energy"},{type:10,level:11,name:"Wolf",description:"Wolves are canines with long bushy tails. They can bite dead a man if they're dangerous."},{type:18,level:14,name:"Undeath",description:"Undeath are beings in mythology, legend, or fiction that are deceased but behave as if they were alive. They deal so much damage."},{type:15,level:14,name:"Power Bread",description:"Superpower Bread made by celebrity chef Robinz of Demacia to celebrate Princess Luccy's 20th birthday"},{type:16,level:16,name:"Unbeaten Shield",description:"The Shield is Demacia's absolute unbreakable defense weapon - whoever has it is invincible and only heroes are worthy to wield it."},{type:17,level:16,name:"Ice Bear",description:"Ice bear is a smart and strong snow bear. They like to eat fish and small animals. However, they do not like humans. They will deal great damage."},{type:8,level:17,name:"Luccy Princess",description:"This is Princess of Demacia Kingdom, tied up or locked in an iron cage<br>Rescue the Princess by defeating enemies."},{type:0,level:21,name:"Shuriken",description:"Shurikens are consumable  throwing weapons that can pierce several enemies. They have a 50% chance of being retrievable again after us"},{type:4,level:24,name:"Demon",description:"The demon is a supernatural being, known for its cruelty and cruelty, often appearing in myths. They cause quite a lot of damage."},{type:21,level:28,name:"Red Spider",description:"Spiders are arthropods with 8 legs and can shoot down enemies with silk. They will cause a lot of damage."},{type:22,level:33,name:"Holy Water",description:"Holy Water is the magic water from Lilaly, extracted from the quintessence of the rose plants that Zoen witch planted."},{type:20,level:35,name:"Firelord",description:"Firelord wields a flaming staff and is capable of energy projection via his eyes and staff. They deal quite big dame."},{type:0,level:41,name:"Katana Sword",description:"The Katana is a steel sword that was historically used by the Japanese samurai. "},{type:23,level:42,name:"Golden Dragon",description:"Golden dragons were the strongest and most majestic of the metallic dragons, and were considered the apex of the draconic race. They deal large dame."},{type:7,level:47,name:"Ghost",description:"Ghosts are spirits or spirits of the dead or animals that can appear to the living. They are as ruthless as demons and cause great damage."},{type:24,level:49,name:"Infinity Gauntlet",description:"Infinity glove is a glove originating from the Marsa universe, containing tremendous power that can summon creatures from space."},{type:27,level:55,name:"Bear",description:"Bears are classified as doglike carnivorans. They usually feed during the day and have a keen sense of smell and deal big damage."},{type:6,level:59,name:"Fire Dragon",description:"Fire Dragons are famously known for their deadly fire and flight abilities. They grow larger, stronger, and more terrifying with extremely dame."},{type:21,level:76,name:"Poison Spider",description:"Spiders are arthropods with 8 legs and can spray venom. They will cause a lot of damage."},{type:28,level:78,name:"Zombie",description:"A zombie is a mythological undead corporeal revenant created through the reanimation of a corpse. They deal so much damage and eat brains."},{type:32,level:106,name:"Ther Axe",description:"Ther Axe is a very powerful axe and hammer of Mercy, it can generate intense destructive electric pulses."},{type:30,level:110,name:"Bomb Goblin",description:"Bomb Goblin is a type of goblin that always carries bombs on its body, tough and ruthless to the point of revenge on the enemy even when he dies."}],n.TypeDailyQuest={Kill_Goblins:0,Kill_Wolves:1,Kill_Firelords:2,Kill_Ghosts:3,Kill_Dragons:4,Kill_Bears:5,Save_the_Princess:6,Open_the_Treasure:7,Win_levels:8,Login_Facebook:9,Complete_Earth_map:10,Complete_esert_map:11,Complete_Iceland_map:12,Complete_Inferno_map:13,Complete_Jade_map:14,Complete_Olympus_map:15,Buy_Hero_Skin:16,Get_Shield_times:17,Get_Food_times:18,Get_Sword_times:19,Get_Gloves_times:20,Push_Wall_Block:21,Kill_Demons:24,Kill_Golden_Dragons:23,Kill_Zombies:25,Kill_Spiders:26,Kill_Ice_Bears:27,Log_game:28,Watch_video_reward:29,Get_Holy_Water:22},n.TypeAchievement={Join_Fb:0,Build_All_Earth_Map:1,Play_500_Level:2,Claim_Daily_10:3,Build_All_Desert_Map:4,Own_5_skins:5,Build_All_Inferno_Map:6,Build_All_Jade_Map:7,Build_All_Olympus_Map:8,Build_All_Iceland_Map:9},cc._RF.pop()},{}],DailyItemCell:[function(e,t,n){"use strict";cc._RF.push(t,"beef2pv1/ZIjaEb4GGqwxPY","DailyItemCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listImg=[],t.listBg=[],t.isClaim=!1,t}return a(t,e),t.prototype.setData=function(e,t,n){this._resourceUI=n,this.dayId=t,this._item=e,this.loadUI(),this.checkActive()},t.prototype.loadUI=function(){this.img.spriteFrame=this.listImg[(this._item.day-1)%7],this.bg.spriteFrame=this.listBg[1],this.priceLabel.string=this._item.gold.toString(),this.titleDay.string="Day "+this._item.day},t.prototype.checkActive=function(){var e=r.default.instance.data_setting.dailyCheck.includes(this._item.day);e&&(this.bg.spriteFrame=this.listBg[0],this.tick.active=!0),this.claimBtn.node.active=!e,this.claimBtn&&(this.isClaim=this.dayId>=this._item.day,this.claimBtn.interactable=this.isClaim,this.isClaim&&(this.imgBtn.spriteFrame=this.yellowFrame))},t.prototype.onClaimBtn=function(){r.default.instance.addcountAchi(s.TypeAchievement.Claim_Daily_10),r.default.instance.data_setting.dailyCheck.push(this._item.day),r.default.instance.data_setting.gold+=this._item.gold,c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),this.claimBtn.node.active=!1,this.checkActive(),this._resourceUI.updateUI()},i([u(cc.SpriteFrame)],t.prototype,"listImg",void 0),i([u(cc.SpriteFrame)],t.prototype,"listBg",void 0),i([u(cc.Sprite)],t.prototype,"img",void 0),i([u(cc.Sprite)],t.prototype,"bg",void 0),i([u(cc.Label)],t.prototype,"priceLabel",void 0),i([u(cc.Button)],t.prototype,"claimBtn",void 0),i([u(cc.Sprite)],t.prototype,"imgBtn",void 0),i([u(cc.SpriteFrame)],t.prototype,"yellowFrame",void 0),i([u(cc.Node)],t.prototype,"tick",void 0),i([u(cc.Label)],t.prototype,"titleDay",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],DailyItem:[function(e,t,n){"use strict";cc._RF.push(t,"7533e7DWoRNWZSl+u6RfQxC","DailyItem");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyItem=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return o([i],e)}());n.DailyItem=r,cc._RF.pop()},{}],DailyPopup:[function(e,t,n){"use strict";cc._RF.push(t,"640895ULgdIFpEcLPUObVb8","DailyPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=e("./DailyItemCell"),p=e("./ResourceItem"),u=cc._decorator,d=u.ccclass,f=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isClaimed7=!1,t.isClaimed14=!1,t.isClaimed21=!1,t.spineHero=null,t}return a(t,e),t.prototype.onEnable=function(){this.dayDiff=c.Utils.diffDay(r.default.instance.data_setting.timeStart),this.checkLoadRoundDay()},t.prototype.checkLoadRoundDay=function(){this.claimBtn.node.active=!0;var e=r.default.instance.data_setting.dailyCheck;this.isClaimed7=e.includes(7),this.isClaimed14=e.includes(14),this.isClaimed21=e.includes(21),this.isClaimed7?this.isClaimed14?(this.dayClaimHero=20,this.loadUI(14,19)):(this.dayClaimHero=13,this.loadUI(7,12)):(this.dayClaimHero=6,this.loadUI(0,5))},t.prototype.loadUI=function(e,t){this.grid.destroyAllChildren(),this.pointHeroCurrent.destroyAllChildren();for(var n=e;n<=t;n++){var o=cc.instantiate(this.prefabCell);o.getComponent(l.default).setData(r.default.instance.listDaily[n],this.dayDiff,this.resourceUI),o.parent=this.grid}this.idHero=r.default.instance.listDaily[t+1].idhero,this.loadPlayer(),this.checkClaimHero()},t.prototype.onExit=function(){this.node.active=!1,r.default.instance.homeScene.setSkinHero(r.default.instance.data_setting.idHero)},t.prototype.loadPlayer=function(){var e=this;cc.resources.load("Prefabs/Hero/Hero",cc.Prefab,function(t,n){e.setPlayerPrefab(n)})},t.prototype.setPlayerPrefab=function(e){this.player=e;var t=cc.instantiate(this.player);t.scale=.8,t.parent=this.pointHeroCurrent,t.setPosition(cc.Vec3.ZERO),this.spineHero=t.getComponent(sp.Skeleton),this.spineHero.setSkin(r.default.instance.loadHeroById(this.idHero)),this.spineHero.setAnimation(1,"Idle",!0)},t.prototype.checkClaimHero=function(){this.isClaimHero=this.dayDiff>=this.dayClaimHero,this.claimBtn.interactable=this.isClaimHero},t.prototype.onClaimHero=function(){r.default.instance.data_setting.dailyCheck.push(this.dayClaimHero+1),r.default.instance.data_setting.listHero.push(this.idHero),this.claimBtn.node.active=!1,c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),r.default.instance.fb.fireBaseLogUnlocSkin(r.default.instance.loadHeroById(this.idHero)),this.checkLoadRoundDay()},i([f(cc.Node)],t.prototype,"grid",void 0),i([f(cc.Prefab)],t.prototype,"prefabCell",void 0),i([f(cc.Node)],t.prototype,"pointHeroCurrent",void 0),i([f(cc.Button)],t.prototype,"claimBtn",void 0),i([f(p.default)],t.prototype,"resourceUI",void 0),i([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils","./DailyItemCell":"DailyItemCell","./ResourceItem":"ResourceItem"}],DailyQuestCell:[function(e,t,n){"use strict";cc._RF.push(t,"59e35pzFZ5OwJfMWP1r/hYT","DailyQuestCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setData=function(e,t,n){this._data=e,this._callback=n,this._index=t;var o=r.default.instance.questDailyTypeCheck(e.Type);if(null!=o){this.description.string=""+r.default.instance.replaceTextQuest(o.Text,e.NumberTarget),this.price.string=""+e.Bonus;var a=this;cc.resources.load("Avatar/"+o.Sprite.instanceID,cc.SpriteFrame,function(e,t){a.setFrame(t)});var i=r.default.instance.data_setting.countQuest[e.Type];this.progress.progress=i/e.NumberTarget,this.valueProcess.string=i+"/"+e.NumberTarget;var s=i>=e.NumberTarget,c=r.default.instance.data_setting.saveQuestDay.includes(e.Type);this.claimBtn.interactable=!c&&s,c&&(this.price.string="Received")}},t.prototype.setFrame=function(e){this.avatar.spriteFrame=e},t.prototype.onClainBtnClick=function(){r.default.instance.data_setting.saveQuestDay.push(this._data.Type),r.default.instance.data_setting.gold+=this._data.Bonus,c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),null!=this._callback&&this._callback(this._index)},i([u(cc.Sprite)],t.prototype,"avatar",void 0),i([u(cc.Label)],t.prototype,"description",void 0),i([u(cc.Label)],t.prototype,"valueProcess",void 0),i([u(cc.Label)],t.prototype,"price",void 0),i([u(cc.ProgressBar)],t.prototype,"progress",void 0),i([u(cc.Button)],t.prototype,"claimBtn",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],DailyQuestDataItem:[function(e,t,n){"use strict";cc._RF.push(t,"571e2FrCX5IlKi8HEMMod2Z","DailyQuestDataItem");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Sprite=n.DailyQuestDataItem=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return o([i],e)}());n.DailyQuestDataItem=r;n.Sprite=function(){},cc._RF.pop()},{}],DailyQuestDayItem:[function(e,t,n){"use strict";cc._RF.push(t,"0963dftI29HOoczzHmavWcD","DailyQuestDayItem");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyQuestDaysItem=n.DailyQuestDayItem=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return o([i],e)}());n.DailyQuestDayItem=r;n.DailyQuestDaysItem=function(){this.DailyQuestDayItems=[]},cc._RF.pop()},{}],DailyQuestPopup:[function(e,t,n){"use strict";cc._RF.push(t,"607beJxUjZDk5bwdZeOWIFB","DailyQuestPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../UI/ResourceItem"),c=e("./DailyQuestCell"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.questCur=[],t}return a(t,e),t.prototype.onEnable=function(){this.loadUI(),r.default.instance.checkResetDay(this.timmer,this.loadUI)},t.prototype.loadUI=function(){var e=this,t=(new Date).getDate(),n=t%10;r.default.instance.data_setting.saveDay!=t&&(r.default.instance.data_setting.saveDay=t,r.default.instance.data_setting.saveQuestDay.length=0),this.questCur=r.default.instance.dailyQuestDays[n].DailyQuestDayItems,this.grid.destroyAllChildren();for(var o=0;o<this.questCur.length;o++){var a=cc.instantiate(this.prefab);a.getComponent(c.default).setData(this.questCur[o],o,function(t){return e.checkClaim(t)}),a.parent=this.grid}this.resourceUI.updateUI()},t.prototype.checkClaim=function(e){this.questCur[e].NumberTemp=1,this.loadUI()},i([u(cc.Node)],t.prototype,"grid",void 0),i([u(cc.Prefab)],t.prototype,"prefab",void 0),i([u(cc.Label)],t.prototype,"timmer",void 0),i([u(s.default)],t.prototype,"resourceUI",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../UI/ResourceItem":"ResourceItem","./DailyQuestCell":"DailyQuestCell"}],DragItem:[function(e,t,n){"use strict";cc._RF.push(t,"b1f4a+z4qJALo4G+eHWZeWe","DragItem");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.beginPos=null,t}return a(t,e),t.prototype.start=function(){this.parentDragNode=this.node.parent,this.node.parent=this.parentDragNode,this.beginPos=this.node.position,this.EnaBledDrag()},t.prototype.Setdata=function(){},t.prototype.EnaBledDrag=function(){var e=this;this.node.scale=1,this.node.on(cc.Node.EventType.TOUCH_START,function(){null!=r.default.instance.tutorialScene&&r.default.instance.tutorialScene.onTouchCheck(),e.node.parent,e.parentDragNode,e.node.opacity=255},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.node.opacity=255;var n=t.touch.getDelta();e.node.x+=n.x,e.node.y+=n.y,null!=r.default.instance.game&&r.default.instance.game.CheckPositionOnMove(e.node),null!=r.default.instance.tutorialScene&&r.default.instance.tutorialScene.CheckPositionOnMove(e.node)},this.node),this.node.on(cc.Node.EventType.TOUCH_END,function(){null!=r.default.instance.game&&(r.default.instance.game.TargetWithNode(e)||e.MoveToBegin()),null!=r.default.instance.tutorialScene&&(r.default.instance.tutorialScene.TargetWithNode(e)||e.MoveToBegin())},this.node)},t.prototype.DisableDrag=function(){this.node.off(cc.Node.EventType.TOUCH_START),this.node.off(cc.Node.EventType.TOUCH_MOVE),this.node.off(cc.Node.EventType.TOUCH_END)},t.prototype.MoveToBegin=function(){this.tarGetItem||(this.tarGetItem=null,(0,cc.tween)(this.node).to(.25,{position:this.beginPos}).call(function(){null!=r.default.instance.tutorialScene&&(r.default.instance.tutorialScene.round1.active=!0)}).start())},t.prototype.UnTarGet=function(){var e=this.node.position,t=this.node.parent.convertToWorldSpaceAR(cc.v2(e.x,e.y));t=this.parentDragNode.convertToNodeSpaceAR(t),this.node.position=cc.v3(t.x,t.y,0),this.node.parent=this.parentDragNode},i([l(cc.Label)],t.prototype,"pointLabel",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],EnemyItem:[function(e,t,n){"use strict";cc._RF.push(t,"e19f2hyBjhDzYaBj2raeneR","EnemyItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator;o.ccclass,o.property,cc._RF.pop()},{}],EnemySlotCell:[function(e,t,n){"use strict";cc._RF.push(t,"19c58eBABdGhJynfHhfmH1v","EnemySlotCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointLabel=null,t.combated=!1,t}return a(t,e),t.prototype.setData=function(e){var t=this;if(null!=e&&(this.enemyData=e),null!=e.point){e.type==s.typeEnemy.Sword||e.type==s.typeEnemy.Knife||e.type==s.typeEnemy.Shield||e.type==s.typeEnemy.Boxing||e.type==s.typeEnemy.Axe?(this.pointLabel.node.color=cc.color(0,128,128),this.pointLabel.string="+"+r.default.instance.numberWithCommas(e.point).toString(),e.type==s.typeEnemy.Sword&&this.pointLabel.node.setPosition(0,60,0)):e.type==s.typeEnemy.Wall||e.type==s.typeEnemy.Trap||e.type==s.typeEnemy.Bow||e.type==s.typeEnemy.Kappa||e.type==s.typeEnemy.Goblin?(this.pointLabel.node.setPosition(0,60,0),this.pointLabel.string="-"+r.default.instance.numberWithCommas(e.point).toString(),this.pointLabel.node.color=cc.color(138,43,226),e.type==s.typeEnemy.Trap&&this.pointLabel.node.setPosition(0,-30,0)):e.type==s.typeEnemy.Gold||e.type==s.typeEnemy.Chest||e.type==s.typeEnemy.Princess||e.type==s.typeEnemy.Key||e.type==s.typeEnemy.PrincessLock?this.pointLabel.node.active=!1:e.type==s.typeEnemy.Food||e.type==s.typeEnemy.Ruou?(this.pointLabel.node.color=cc.color(0,128,128),this.pointLabel.node.setPosition(0,30,0),this.pointLabel.string="x"+r.default.instance.numberWithCommas(e.point).toString()):e.type==s.typeEnemy.Boom?(this.pointLabel.string="x"+r.default.instance.numberWithCommas(e.point).toString(),this.pointLabel.node.setPosition(0,30,0)):(this.pointLabel.node.color=cc.color(255,0,0),this.pointLabel.string=r.default.instance.numberWithCommas(e.point).toString(),this.pointLabel.node.setPosition(0,60,0));var n=r.default.instance.LoadEnemyType(e.type);r.default.instance.GetPrefabAssetByUrl(n,function(e){null!=e&&t.setEnemyPrefab(e)}),r.default.instance.game.countEnemyInLevel++}else this.node.destroy()},t.prototype.setEnemyPrefab=function(e){var t=cc.instantiate(e);t.parent=this.pointSpaw,t.setPosition(this.pointSpaw.position),this.enemyData.type==s.typeEnemy.Trap&&(this.pointSpaw.setPosition(-50,-28,0),this.pointLabel.node.setPosition(-50,-28,0)),this.enemyData.type==s.typeEnemy.Bow&&(this.pointSpaw.setPosition(-50,90,0),this.pointLabel.node.setPosition(-50,80,0)),this.enemyData.type==s.typeEnemy.Axe&&this.pointSpaw.setPosition(-0,10,0),this.spine=t.getComponent(sp.Skeleton)},t.prototype.checkCombat=function(){this.enemyData.type!=s.typeEnemy.Chest&&(this.combated=!0),c.Utils.log("checkCombat ======== "+this.combated+" "+this.enemyData.type)},i([u(cc.Label)],t.prototype,"pointLabel",void 0),i([u(cc.Node)],t.prototype,"pointSpaw",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],FBInstantAds:[function(e,t,n){"use strict";cc._RF.push(t,"9b225Vh0pZHuKqzpKXmPnJH","FBInstantAds"),Object.defineProperty(n,"__esModule",{value:!0}),n.FBInstantAds=void 0;var o=e("../../base/Signal"),a=e("../../Controller/GameManager"),i=e("../../Unit/Constants"),r=e("../tracking/GameTracking"),s=function(){function e(){}return Object.defineProperty(e,"isRewardedVideoReady",{get:function(){return null!=e._preloadedRewardedVideo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isInterstitialReady",{get:function(){return null!=e._preloadedInterstitial},enumerable:!1,configurable:!0}),e.checkInitFBInstant=function(){return"undefined"!=typeof FBInstant||(console.warn("FBInstant is undefined"),!1)},e.preloadInterstitialAd=function(t){if(void 0===t&&(t=null),e.checkInitFBInstant())return e.isInterstitialReady?(console.warn("Interstitial ad ready to show"),void(t&&t())):void FBInstant.getInterstitialAdAsync(e.adsConfig.Interstitial).then(function(t){return e._preloadedInterstitial=t,e._preloadedInterstitial.loadAsync()}).then(function(){console.log("Interstitial preloaded"),t&&t()}).catch(function(n){console.warn("Interstitial failed to preload: "+n.message),r.GameTracking.logEventAdLoadFailed(e.typeAd.Interstitial,n.code),e._preloadedInterstitial=null,t&&t(n)});t&&t()},e.showInterstitialAd=function(t){if(e.checkInitFBInstant())if(a.default.instance.data_setting.level-e.lastLevelShowAds<e.adsConfig.distanceLevel)t();else{var n=(new Date).getTime(),o=(n-e.lastTimeShowAds)/1e3;if(o<e.adsConfig.distanceTime)return console.warn("Too many ads shown recently: dt = "+o),void t();e.isInterstitialReady?e._preloadedInterstitial.showAsync().then(function(){console.log("Interstitial ad finished successfully"),e._preloadedInterstitial=null,e.lastTimeShowAds=n,e.lastLevelShowAds=a.default.instance.data_setting.level,e.preloadInterstitialAd(),r.GameTracking.logEventShowAd(e.typeAd.Interstitial),t()}).catch(function(n){console.warn("Interstitial ad is not shown: "+n.message),e._preloadedInterstitial=null,e.preloadInterstitialAd(),r.GameTracking.logEventShowAdFailed(n.code),t(n)}):e.preloadInterstitialAd(function(n){n?t(n):e.showInterstitialAd(t)})}else t()},e.preloadRewardedVideoAd=function(t){if(void 0===t&&(t=null),e.checkInitFBInstant()){if(e.isRewardedVideoReady)return console.warn("Rewarded Video Ad ready to show"),void(t&&t());e.LoadingRewardedVideoSignal.dispatch(!0),FBInstant.getRewardedVideoAsync(e.adsConfig.Rewarded).then(function(t){return e._preloadedRewardedVideo=t,e._preloadedRewardedVideo.loadAsync()}).then(function(){console.log("Rewarded video preloaded"),e.LoadingRewardedVideoSignal.dispatch(!1),t&&t()}).catch(function(n){console.warn("Rewarded video failed to preload: "+n.message),r.GameTracking.logEventAdLoadFailed(e.typeAd.Rewarded,n.code),e._preloadedRewardedVideo=null,t&&t(n)})}else t&&t()},e.showRewardedVideoAd=function(t){e.checkInitFBInstant()&&(e.isRewardedVideoReady?e._preloadedRewardedVideo.showAsync().then(function(){console.log("Rewarded video watched successfully"),e._preloadedRewardedVideo=null,e.lastTimeShowAds=(new Date).getTime(),e.preloadRewardedVideoAd(),r.GameTracking.logEventShowAd(e.typeAd.Rewarded),a.default.instance.data_setting.countQuest[i.TypeDailyQuest.Watch_video_reward]+=1,a.default.instance.addcountQuest(i.TypeDailyQuest.Watch_video_reward),t(!0)}).catch(function(n){console.warn("Rewarded video error: "+JSON.stringify(n)),e._preloadedRewardedVideo=null,e.lastTimeShowAds=(new Date).getTime(),e.preloadRewardedVideoAd(),r.GameTracking.logEventShowAdFailed(n.code),t(!1)}):e.preloadRewardedVideoAd(function(n){n?t(n):e.showRewardedVideoAd(t)}))},e.typeAd={Interstitial:"Interstitial",Rewarded:"Rewarded"},e._preloadedInterstitial=null,e._preloadedRewardedVideo=null,e.lastTimeShowAds=0,e.lastLevelShowAds=0,e.LoadingRewardedVideoSignal=new o.Signal,e}();n.FBInstantAds=s,cc._RF.pop()},{"../../Controller/GameManager":"GameManager","../../Unit/Constants":"Constants","../../base/Signal":"Signal","../tracking/GameTracking":"GameTracking"}],FBInstantData:[function(e,t,n){"use strict";cc._RF.push(t,"09452fizKlBLom5nLmzsz3a","FBInstantData"),Object.defineProperty(n,"__esModule",{value:!0}),n.FBInstantData=void 0;var o=e("../../Unit/Utils"),a=function(){function e(){}return e.getData=function(e,t){for(var n={},a=0;a<=e.length;a++)n[e[a]]=JSON.parse(o.Utils.readData(e[a]));t&&t(n)},e.setData=function(e,t){void 0===t&&(t=null),cc.log("setData: "+JSON.stringify(e)),o.Utils.saveData(Object.keys(e)[0],JSON.stringify(Object.values(e)[0])),t&&t(null)},e}();n.FBInstantData=a,cc._RF.pop()},{"../../Unit/Utils":"Utils"}],FBInstantGames:[function(e,t,n){"use strict";cc._RF.push(t,"98294WxLiFKG6IBecqMuD3C","FBInstantGames"),Object.defineProperty(n,"__esModule",{value:!0}),n.FBInstantGames=void 0;var o=e("../../base/utils/GUIUtil"),a=e("../tracking/GameTracking"),i=function(){function e(){}return e.onQuitGame=function(){"undefined"!=typeof FBInstant&&FBInstant.quit()},e.onShareGame=function(t){if(void 0===t&&(t=null),"undefined"!=typeof FBInstant){var n=window.templateShare;n||(n=e.templateShare);var a=o.default.getImgBase64();FBInstant.shareAsync({intent:"SHARE",image:a,text:n,data:{myReplayData:"..."}}).then(function(){t&&t()})}},e.inviteFriends=function(t){if(void 0===t&&(t=null),"undefined"!=typeof FBInstant){var n=o.default.getImgBase64(),a=window.templateInvite;a||(a=e.templateInvite),FBInstant.context.chooseAsync().then(function(){console.log("chooseAsync: "+FBInstant.context.getID()),FBInstant.updateAsync({action:"CUSTOM",cta:a.cta,image:n,text:a.text,template:"VILLAGE_INVASION",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("inviteFriends DONE"),t&&t()})})}},e.createShortcut=function(e){void 0===e&&(e=null),console.log("createShortcut"),"undefined"!=typeof FBInstant&&FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){e&&e()}).catch(function(e){console.log("Shortcut not created: "+e.message)})})},e.subscribeMessengerBot=function(e){void 0===e&&(e=null),console.log("subscribeMessengerBot"),"undefined"!=typeof FBInstant&&FBInstant.player.canSubscribeBotAsync().then(function(e){console.log("canSubscribeBot: ",e),e&&FBInstant.player.subscribeBotAsync().then(function(){FBInstant.setSessionData({optin:!0}),a.GameTracking.logEventOptinMessage(!0)}).catch(function(){FBInstant.setSessionData({optin:!1}),a.GameTracking.logEventOptinMessage(!1)})})},e.sendSessionData=function(e,t){void 0===t&&(t=null),"undefined"!=typeof FBInstant&&FBInstant.setSessionData({currentLevel:e})},e.getPayloadData=function(e){(void 0===e&&(e=null),"undefined"!=typeof FBInstant)&&e(FBInstant.getEntryPointData()||null)},e.templateShare="Try Home Pin Now",e.templateInvite={cta:"Play",text:{default:"Try Home Pin Now",localizations:{ar_AR:"Try Home Pin Now",en_US:"Try Home Pin Now",es_LA:"Try Home Pin Now"}}},e}();n.FBInstantGames=i,cc._RF.pop()},{"../../base/utils/GUIUtil":"GUIUtil","../tracking/GameTracking":"GameTracking"}],FBManager:[function(e,t){"use strict";cc._RF.push(t,"e0cfe5mfAdHurYJuo4nNZal","FBManager");var n,o=(n=e("../Controller/GameManager"))&&n.__esModule?n:{default:n},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../Unit/Constants")),r=e("../Unit/Toast"),s=e("../Unit/Utils");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}var l=null,p=null,u=!1,d=!1;cc.Class({extends:cc.Component,properties:{shareStartGame:{type:cc.Texture2D,default:null},shareEndGame:{type:cc.Texture2D,default:null},shareLeaderboard:{type:cc.Texture2D,default:null},testAvatar:{type:cc.Texture2D,default:null},winIcon:{type:cc.Texture2D,default:null},spriteFrame:{default:null,visible:!1},fbId:{default:0,visible:!1},fbMessageType:{default:0,visible:!1},fbName:{default:"",visible:!1},log:{default:"",visible:!1},fbAvatar:{default:"",visible:!1}},start:function(){},getData:function(){if("undefined"!=typeof FBInstant){this.fbId=FBInstant.player.getID(),this.fbName=FBInstant.player.getName(),s.Utils.log("getData -> FBInstant.player.name",FBInstant.player);var e=this.getCustomData();this.fbMessageType=e?e.id===this.fbId?a.MessageType.PLAY:a.MessageType.PLAY_MATCH:a.MessageType.NONE}},getContextType:function(){return"undefined"==typeof FBInstant?"":FBInstant.context.getType()},getCustomData:function(){return"undefined"==typeof FBInstant?null:FBInstant.getEntryPointData()},getAvatar:function(){"undefined"==typeof FBInstant||this.spriteFrame||(this.fbAvatar=FBInstant.player.getPhoto())},getDataPlayer:function(e){s.Utils.log("getDataPlayer ========= "),"undefined"!=typeof FBInstant&&FBInstant.player.getDataAsync(["dataPlayer"]).then(function(t){o.default.instance.data_setting=t.dataPlayer,e()}).catch(function(e){s.Utils.log("error ========= "+e.message)})},setDataPlayer:function(){s.Utils.log("setDataPlayer ========= "),FBInstant.player.setDataAsync({dataPlayer:o.default.instance.data_setting}).then(FBInstant.player.flushDataAsync).then(function(){s.Utils.log("Data persisted to FB!")}).catch(function(e){s.Utils.log("error ========= "+e.message)})},getPlayerInfo:function(e){"undefined"!=typeof FBInstant&&FBInstant.getLeaderboardAsync(a.default.LEADERBOARD_NAME).then(function(e){return e.getPlayerEntryAsync()}).then(function(t){t.getRank(),e(t.getRank())})},createShortcut:function(){FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){s.Utils.log("Shortcut created ")}).catch(function(e){s.Utils.log("Shortcut not created "+e.toString())})})},getListFriends:function(e){"undefined"!=typeof FBInstant?FBInstant.player.getConnectedPlayersAsync().then(function(t){var n=[];t.map(function(e){n.push(e.getID())}),e(n)}):e()},getLeaderboard:function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=10),void 0===n&&(n=null),"undefined"!=typeof FBInstant?FBInstant.getLeaderboardAsync(a.default.LEADERBOARD_NAME).then(function(n){return n.getEntriesAsync(t,e)}).then(function(e){var t=[];e.map(function(e){var n={id:e.getPlayer().getID(),name:e.getPlayer().getName(),photo:e.getPlayer().getPhoto(),rank:e.getRank(),score:e.getScore(),timestamp:e.getTimestamp()};t.push(n)}),t.length,n&&n(t)}).catch(function(e){e.message}):n()},submitScore:function(e,t){"undefined"!=typeof FBInstant&&FBInstant.getLeaderboardAsync(a.default.LEADERBOARD_NAME).then(function(t){return t.getName(),t.setScoreAsync(e)}).then(function(){t()}).catch(function(e){e.message})},playWithMe:function(e,t){"undefined"!=typeof FBInstant&&FBInstant.context.createAsync(e).then(function(){this.fbMessageType=a.MessageType.PLAY,t()}).catch(function(e){r.Toast.instance.showText(e.message)})},sendMessage:function(){if(this.fbMessageType=a.MessageType.PLAY,"SOLO"!==FBInstant.context.getType()&&this.fbMessageType!==a.MessageType.NONE){this.getCustomData(),this.fbName,this.fbName;var e=this.fbName+(this.fbMessageType===a.MessageType.PLAY),t=this.fbName+(this.fbMessageType===a.MessageType.PLAY),n={action:"CUSTOM",cta:this.fbMessageType===a.MessageType.PLAY?"Play":"Start New Match",text:{default:t,localizations:{en_US:t,vi_VN:e}},template:"play_turn",data:{id:this.fbId,score:100,avatar:this.fbAvatar},strategy:"IMMEDIATE",notification:"NO_PUSH"},o=this.fbMessageType===a.MessageType.PLAY?a.ShareType.START_LEADERBOARD:a.ShareType.END_LEADERBOARD;this.generateImage(o,function(e){n.image=e,FBInstant.updateAsync(n).then(function(){r.Toast.instance.showText("Message was sent!")}).catch(function(e){r.Toast.instance.showText(e.message)})})}},share:function(e){if("undefined"!=typeof FBInstant){var t={intent:"SHARE",text:"Game hay l\u1eafm ch\u01a1i \u0111i!",data:{customData:"Hero Tower Wars"}};this.generateImage(e,function(e){t.image=e,FBInstant.shareAsync(t).then(function(){}).catch(function(e){r.Toast.instance.showText(e.message)})})}},shareAsync:function(e){"undefined"!=typeof FBInstant&&this.generateImage(a.ShareType.START_GAME,function(t){FBInstant.context.chooseAsync().then(function(){var n;FBInstant.updateAsync((n={action:"CUSTOM",cta:"Play",image:t,text:{default:"Hero Tower War",localizations:{en_EN:"Hero Tower War",es_LA:"Hero Tower War",pt_BR:"Hero Tower War"}},template:"play_turn"},n.template="VILLAGE_INVASION",n.data={myReplayData:"..."},n.notification="NO_PUSH",n)).then(function(){console.log("inviteFriends DONE"),e&&e()}).catch(function(e){s.Utils.log("shareAsync > error: "+e.message)})})})},inviteFriends:function(e){if("undefined"!=typeof FBInstant){var t=GUIUtil.getImgBase64(),n=window.templateInvite;n||(n=FBInstantGames.templateInvite),FBInstant.context.chooseAsync().then(function(){console.log("chooseAsync: "+FBInstant.context.getID()),FBInstant.updateAsync({action:"CUSTOM",cta:n.cta,image:t,text:n.text,template:"VILLAGE_INVASION",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("inviteFriends DONE"),e&&e()})})}},generateImage:function(e,t){var n=this,o=e===a.ShareType.START_GAME?this.shareStartGame.url:e===a.ShareType.END_GAME?this.shareEndGame.url:this.shareLeaderboard.url,i=e===a.ShareType.END_GAME?684:1200,r=e===a.ShareType.END_GAME?549:627,s=e===a.ShareType.START_GAME||e===a.ShareType.END_GAME?150:300,c=(e===a.ShareType.START_GAME||a.ShareType.END_GAME,[{uri:o,x:0,y:0,w:i,h:r}]),l=document.createElement("CANVAS");l.width=i,l.height=r;var p=0;e===a.ShareType.END_LEADERBOARD?c.map(function(o){n.loadImage(e,l,o,function(){if(++p===c.length){var o={uri:n.getCustomData().avatar,x:i-i/4+s/2,y:r/2-s/2,w:s,h:s};n.loadImage(e,l,o,function(){o={uri:n.winIcon.url,x:0,y:0,w:255,h:255},n.loadImage(e,l,o,function(){t(l.toDataURL())})})}})}):c.map(function(o){n.loadImage(e,l,o,function(){++p===c.length&&t(l.toDataURL("image/png"))})})},loadImage:function(e,t,n,i){var r=this,c=t.width,l=t.height,p=t.getContext("2d"),u=Object.assign({},n),d=new Image;d.onload=function(){if(e===a.ShareType.START_GAME||e===a.ShareType.END_GAME||e===a.ShareType.START_LEADERBOARD)if(u.uri===o.default.instance.fbAvatar){if(p.fillStyle="#FFFFFF",e===a.ShareType.START_LEADERBOARD){p.font="bold 80px Arial";var t="SCORE";p.fillText(t,c-c/3-p.measureText(t).width/2,l/2-20),t=o.default.instance.scoreGame.toString(),p.fillText(t,c-c/3-p.measureText(t).width/2,l/2+80)}else p.font=e===a.ShareType.START_GAME?"bold 50px Arial":"50px Arial",t=e===a.ShareType.START_GAME?"PLAY WITH ME!":"LOOK AT MY SCORE!",p.font=e===a.ShareType.START_GAME?"bold 30px Arial":"50px Arial",t=r.fbName,p.fillText(t,c/2-p.measureText(t).width/2+70,l/2+(e===a.ShareType.START_GAME?5e3:90)),e===a.ShareType.END_GAME&&(p.font="55px Arial",t="Score: "+o.default.instance.scoreGame,p.fillText(t,c/2-p.measureText(t).width/2+170,l/2+75));var n=e===a.ShareType.START_LEADERBOARD?75:60,s=e===a.ShareType.START_GAME?5e3:c/2-225;p.translate(s,250),p.beginPath(),p.arc(2*n,2*n,2*n,0,2*Math.PI),p.closePath(),p.strokeStyle="#FFFF00",p.stroke(),p.clip(),p.drawImage(d,0,0,4*n,4*n)}else p.drawImage(d,u.x,u.y,u.w,u.h);else if(e===a.ShareType.END_LEADERBOARD)if(u.uri===r.shareLeaderboard.url)p.drawImage(d,u.x,u.y,u.w,u.h);else{var f=c/3,h=c-c/3,y=r.getCustomData();u.uri===r.fbAvatar?(p.fillStyle="#FFFFFF",p.font="bold 80px Arial",t=o.default.instance.game.score.toString(),p.fillText(t,f-p.measureText(t).width/2,l/2+260),t=y.score.toString(),p.fillText(t,h-p.measureText(t).width/2,l/2+260),p.save(),p.translate(f-u.w/2,l/2-u.h/2)):u.uri===y.avatar?(p.restore(),p.translate(h-u.w/2,l/2-u.h/2),p.save()):(p.restore(),o.default.instance.game.score>y.score?p.translate(f-600-u.w/1.25,l/2-450):p.translate(f-300-u.w/3.8,l/2-450),p.drawImage(d,u.x,u.y,u.w,u.h)),u.uri!==r.winIcon.url&&(p.beginPath(),p.arc(150,150,150,0,2*Math.PI),p.closePath(),p.strokeStyle="#FFFF00",p.stroke(),p.clip(),p.drawImage(d,0,0,300,300))}i()},d.onerror=function(){return s.Utils.log("load "+u.uri+" fail")},d.crossOrigin="anonymous",d.src=u.uri},preloadInterstitial:function(e){"undefined"!=typeof FBInstant&&FBInstant.getSupportedAPIs().includes("getInterstitialAdAsync")&&(u=!1,FBInstant.getInterstitialAdAsync(a.default.INTERSTITIAL_ID).then(function(e){return(l=e).loadAsync()}).then(function(){s.Utils.log("Interstitial ready."),e(),u=!0}).catch(function(e){s.Utils.log("Interstitial > error: "+e.message),o.default.instance.fb.tryPreload(a.AdsType.INTERSTITIAL,2)}))},showInterstitial:function(e){l&&u?l.showAsync().then(function(){s.Utils.log("Interstitial watched!"),l=null,e(),o.default.instance.fb.preloadInterstitial()}).catch(function(t){s.Utils.log("showInterstitial > error: "+t.message),o.default.instance.fb.preloadInterstitial(),e()}):e()},tryPreload:function(e,t){setTimeout(function(){o.default.instance.fb.handleAdsNoFill(e,t)},3e4)},handleAdsNoFill:function(e,t){this.logMsg("call handleAdsNoFill: "+e+" | "+t),t>3?this.logMsg("handleAdsNoFill max --------"):(e===a.AdsType.INTERSTITIAL?l:p).loadAsync().then(function(){s.Utils.log("handleAdsNoFill preloaded"),e===a.AdsType.INTERSTITIAL?u=!0:d=!0}).catch(function(n){s.Utils.log("handleAdsNoFill > error: "+n.message),o.default.instance.fb.tryPreload(e,t+1)})},canShowRewarded:function(){return d},preloadRewarded:function(e){"undefined"!=typeof FBInstant&&FBInstant.getSupportedAPIs().includes("getRewardedVideoAsync")&&(d=!1,FBInstant.getRewardedVideoAsync(a.default.VIDEO_ID).then(function(e){return(p=e).loadAsync()}).then(function(){s.Utils.log("Rewarded Video ready"),e(!0),d=!0}).catch(function(e){s.Utils.log("preloadRewarded > error: "+e.message),o.default.instance.fb.tryPreload(a.AdsType.VIDEO,2)}))},showRewarded:function(e){p?p.showAsync().then(function(){s.Utils.log("Rewarded Video watched!"),p=null,e(!0),o.default.instance.fb.preloadRewarded()}).catch(function(t){e(!1),s.Utils.log("showRewarded > error: "+t.message),o.default.instance.fb.preloadRewarded()}):s.Utils.log("Not ready to show video.")},exit:function(){"undefined"!=typeof FBInstant&&FBInstant.quit()},logMsg:function(){},fireBaseLogPlayLevel:function(e){firebase.analytics().logEvent("play_level",{level_numer:o.default.instance.data_setting.level,is_success:e})},fireBaseLogUnlocSkin:function(e){firebase.analytics().logEvent("unlock_skin",{skin_name:e})},fireBaseLogFromAd:function(e){firebase.analytics().logEvent("ad_user",{ad_id:e})},fireBaseLogCreateShortcut:function(){firebase.analytics().logEvent("create_shortcut",{current_level:o.default.instance.data_setting.level})},fireBaseLogInvite:function(){firebase.analytics().logEvent("invite_friends",{current_level:o.default.instance.data_setting.level})},fireBaseLogShare:function(){firebase.analytics().logEvent("share_game",{current_level:o.default.instance.data_setting.level})},getInstanceRemoteConfig:function(){},subscribeMessengerBot:function(){console.log("subscribeMessengerBot"),"undefined"!=typeof FBInstant&&FBInstant.player.canSubscribeBotAsync().then(function(e){console.log("canSubscribeBot: ",e),e&&FBInstant.player.subscribeBotAsync().then(function(){FBInstant.setSessionData({optin:!0})}).catch(function(){FBInstant.setSessionData({optin:!1})})})},getImgBase64:function(){var e=cc.view.getVisibleSize(),t=e.width,n=e.height,o=new cc.RenderTexture,a=cc.game._renderContext;o.initWithSize(cc.visibleRect.width,cc.visibleRect.height,a.STENCIL_INDEX8);var r=document.createElement("canvas"),s=r.getContext("2d");r.width=t,r.height=n;var c=new Uint8Array(t*n*4);o.readPixels(c);for(var l=0;l<n;l++){var p=s.createImageData(100,100);p.data[i+0]=190,p.data[i+1]=0,p.data[i+2]=210,p.data[i+3]=255,s.putImageData(p,20,20)}return r.toDataURL("image/png")},getBase64Image:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")}}),cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Toast":"Toast","../Unit/Utils":"Utils"}],FBServices:[function(e,t){"use strict";cc._RF.push(t,"6b898Y3OeVHS6ufiEhF/9Ra","FBServices"),cc.Class({extends:cc.Component,properties:{outTips:cc.Label},start:function(){"undefined"==typeof FB&&cc.error("These services are based on the Facebook SDK for JavaScript. You should load https://connect.facebook.net/en_US/all.js before using the FB API."),FB.init({appId:"1901989576734054",autoLogAppEvents:!0,status:!0,xfbml:!0,version:"v2.9"})},onLogin:function(){var e=this;"undefined"!=typeof FB&&FB.login(function(t){t.authResponse?(console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(t){e.outTips.string="Good to see you, "+t.name+"."+t.id})):e.outTips.string="User cancelled login or did not fully authorize."})},onLogout:function(){var e=this;"undefined"!=typeof FB&&FB.logout(function(t){e.outTips.string="logout",console.log(t)})},onShare:function(){"undefined"!=typeof FB&&FB.ui({method:"share",href:"https://developers.facebook.com/docs/"},function(e){console.log(e)})},onAppRequests:function(){var e=this;"undefined"!=typeof FB&&FB.ui({method:"apprequests",message:"Hello !!!"},function(t){e.outTips.string=JSON.stringify(t)})}}),cc._RF.pop()},{}],FirebaseTracking:[function(e,t,n){"use strict";cc._RF.push(t,"34936qb+P1KVquQ2Or7qiy/","FirebaseTracking"),Object.defineProperty(n,"__esModule",{value:!0}),n.FirebaseTracking=void 0;var o=function(){function e(){}return e.logEvent=function(e,t){"undefined"!=typeof firebase&&firebase.analytics().logEvent(e,t)},e.logEventPlayLevel=function(t,n){e.logEvent(e.event_play_level,{level:t,success:n})},e.logEventUnlockSkin=function(t){e.logEvent(e.event_unlock_skin,{skin:t})},e.logEventCreateShortCut=function(t){e.logEvent(e.event_create_shortcut,{level:t})},e.logEventInviteFriend=function(t){e.logEvent(e.event_invite_friends,{level:t})},e.logEventShareGame=function(t){e.logEvent(e.event_share_game,{level:t})},e.logEventQuitGame=function(t){e.logEvent(e.event_quit_game,{level:t})},e.logEventAdLoadFailed=function(t,n){e.logEvent(e.event_ad_load_failed,{ad_type:t,error_type:n})},e.logEventShowAdFailed=function(t){e.logEvent(e.event_show_ad_failed,{error_type:t})},e.logEventShowAd=function(t){e.logEvent(e.event_show_ad,{type:t})},e.logEventOptinMessage=function(t){e.logEvent(e.event_optin_message,{optin:t})},e.logEventUserFromAd=function(t){e.logEvent("ad_user",{ad_id:t})},e.event_create_shortcut="create_shortcut",e.event_invite_friends="invite_friends",e.event_share_game="share_game",e.event_quit_game="quit_game",e.event_play_level="play_level",e.event_unlock_skin="unlock_skin",e.event_show_ad="show_ad",e.event_ad_load_failed="ad_load_failed",e.event_show_ad_failed="show_ad_failed",e.event_optin_message="optin_message",e}();n.FirebaseTracking=o,cc._RF.pop()},{}],GATracking:[function(e,t,n){"use strict";cc._RF.push(t,"50b8e9RVvVLDJaxUjgX6bKV","GATracking"),Object.defineProperty(n,"__esModule",{value:!0}),n.GATracking=void 0;var o=function(){function e(){}return e.logEventUserFromAd=function(e){null!=typeof GameAnalytics&&GameAnalytics("addDesignEvent","ad_id:"+e)},e}();n.GATracking=o,cc._RF.pop()},{}],GA:[function(e,t,n){"use strict";cc._RF.push(t,"f11a0UGyrhNM4D+O4P6Ansb","GA");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Controller/GameManager"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){}return e.pushAdEvent=function(e){a.default.instance.fb.fireBaseLogFromAd(e),null!=typeof GameAnalytics&&GameAnalytics("addDesignEvent","ad_id:"+e)},o([r],e)}());n.default=s,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],GUIUtil:[function(e,t,n){"use strict";cc._RF.push(t,"df236gFFZZGa49IfTkjUV8P","GUIUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.addClickListener=function(e,t,n,o,a){void 0===a&&(a="");var i=new cc.Component.EventHandler;i.target=t,i.component=n,i.handler=o,i.customEventData=a,e.getComponent(cc.Button).clickEvents.push(i)},e.addToggleListener=function(e,t,n,o,a){void 0===a&&(a="");var i=new cc.Component.EventHandler;i.target=t,i.component=n,i.handler=o,i.customEventData=a,e.getComponent(cc.Toggle).clickEvents.push(i)},e.getDistancePoints=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getImgBase64=function(){var e=new cc.Node;e.x=cc.visibleRect.width/2,e.y=cc.visibleRect.height/2,e.parent=cc.director.getScene();var t=e.addComponent(cc.Camera);t.backgroundColor=cc.Color.TRANSPARENT,t.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR,t.cullingMask=4294967295;var n=new cc.RenderTexture,o=cc.game._renderContext;n.initWithSize(cc.visibleRect.width,cc.visibleRect.height,o.STENCIL_INDEX8),t.targetTexture=n,t.render();var a=n.readPixels(),i=document.createElement("canvas"),r=i.getContext("2d"),s=i.width=n.width,c=i.height=n.height;i.width=n.width,i.height=n.height;for(var l=4*s,p=0;p<c;p++){for(var u=c-1-p,d=r.createImageData(s,1),f=u*s*4,h=0;h<l;h++)d.data[h]=a[f+h];r.putImageData(d,0,p)}return i.toDataURL("image/jpeg")},e}();n.default=o,cc._RF.pop()},{}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"d6044CbetVAhLOQiVwR4azh","GameController");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"e6a2c5F9R1I95Kih4VRaLex","GameManager");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Data_Setting=void 0;var r=e("../Unit/Constants"),s=e("../Unit/Toast"),c=e("../Unit/Utils"),l=e("./AudioManager"),p=cc._decorator,u=p.ccclass,d=(p.property,function(){this.mute=!0,this.muteSound=!0,this.listHero=[1],this.dailyCheck=[0],this.idHero=1,this.gold=0,this.level=1,this.timeStart=(new Date).getTime(),this.numberSkinPieces=0,this.tutorial=!1,this.createShortcut=!1,this.caslteEarth=[0,0,0,0,0,0,0],this.caslteDesert=[0,0,0,0,0,0,0],this.caslteIceland=[0,0,0,0,0,0,0],this.caslteInferno=[0,0,0,0,0,0,0],this.caslteJade=[0,0,0,0,0,0,0],this.caslteOlympus=[0,0,0,0,0,0,0],this.countQuest=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.saveQuestDay=[],this.countAchievement=[0,0,0,0,0,0,0,0,0,0],this.saveAchComplete=[],this.saveDay=0});n.Data_Setting=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapAssets={},t.shopHero=null,t.data_setting=new d,t.listLevelData=new Array,t.listHeroData=new Array,t.listDaily=new Array,t.dailyQuestDatas=new Array,t.dailyQuestDays=new Array,t.AchievementsData=new Array,t.pointHero=0,t.haveKey=!1,t.isChest=!1,t.fistInitData=!1,t.fbId=0,t.fbName="",t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(e){this.game=e},t.prototype.initTutorial=function(e){this.tutorialScene=e},t.prototype.initShopHero=function(e){this.shopHero=e},t.prototype.initHomeScene=function(e){this.homeScene=e},t.prototype.initWorldPopup=function(e){this.worldPopup=e},t.prototype.loadScene=function(e,t){var n=this;void 0===t&&(t=null),this._preLoadScene=cc.instantiate(t);var o=cc.director.getScene().children[0];o.addChild(this._preLoadScene),o.setPosition(cc.Vec2.ZERO);var a=this._preLoadScene.getComponentInChildren(cc.ProgressBar);cc.director.preloadScene(e,function(e,t){var n=e/t;a.progress<n&&(a.progress=n)},function(t){t?s.Toast.instance.showText("C\xf3 l\u1ed7i x\u1ea3y ra!"):cc.director.loadScene(e,function(){s.Toast.clear(),n._preLoadScene=null,n._loadingPopup=null})})},t.prototype.showLoading=function(){var e=this;c.Utils.log("showLoading"),null==this._loadingPopup?cc.loader.loadRes("Prefabs/Loading/loadingPopup",function(t,n){t?cc.error(t):(e._loadingPopup=cc.instantiate(n),cc.director.getScene().children[0].addChild(e._loadingPopup))}):this._loadingPopup.active=!0},t.prototype.fixWinSize=function(){var e=cc.find("Canvas").getComponent(cc.Canvas),t=cc.winSize;t.width/t.height<2/3?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1)},t.prototype.hideLoading=function(){this._loadingPopup&&(this._loadingPopup.active=!1)},t.prototype.showMaskLoading=function(e){e.active=!0,e.scale=1,e.opacity=255,cc.tween(e).to(1,{opacity:0}).to(0,{scale:0}).start()},t.prototype.loadResourceLevel=function(e){var t=this;cc.loader.loadResDir("Data/level",cc.JsonAsset,function(n,o){n?console.log("load JSON: "+JSON.stringify(n)):o.map(function(e){t.dataLevel=e,t.loadDataLevel()}),e()})},t.prototype.loadResourceHero=function(e){var t=this;cc.loader.loadResDir("Data/hero",cc.JsonAsset,function(n,o){n?console.log("load JSON: "+JSON.stringify(n)):o.map(function(e){t.dataHero=e,t.loadDataHero()}),e()})},t.prototype.loadResourceDaily=function(e){var t=this;cc.loader.loadResDir("Data/DailyClaim",cc.JsonAsset,function(n,o){n?console.log("load JSON: "+JSON.stringify(n)):o.map(function(e){t.dataDaily=e,t.loadDataDaily()}),e()})},t.prototype.loadDailyQuestData=function(e){var t=this;cc.loader.loadResDir("Data/quest",cc.JsonAsset,function(n,o){n?console.log("load JSON: "+JSON.stringify(n)):o.map(function(e){t.dataQuestData=e,t.loadDailyQuestDatas()}),e()})},t.prototype.loadAchievementQuestData=function(e){var t=this;cc.loader.loadResDir("Data/Achievement",cc.JsonAsset,function(n,o){n?console.log("load JSON: "+JSON.stringify(n)):o.map(function(e){t.dataAchievement=e,t.loadAchievementData()}),e()})},t.prototype.loadDataHero=function(){this.listHeroData.length=0;for(var e=this.dataHero.json,t=0;t<e.length;t++){var n=e[t];this.listHeroData.push(n)}},t.prototype.loadDataLevel=function(){this.listLevelData.length=0;for(var e=this.dataLevel.json,t=0;t<e.length;t++){var n=e[t];this.listLevelData.push(n)}},t.prototype.loadAchievementData=function(){this.AchievementsData.length=0;for(var e=this.dataAchievement.json,t=0;t<e.length;t++){var n=e[t];this.AchievementsData.push(n)}},t.prototype.loadDailyQuestDatas=function(){this.dailyQuestDatas.length=0;for(var e=this.dataQuestData.json,t=0;t<e.DailyQuestDatas.length;t++){var n=e.DailyQuestDatas[t];this.dailyQuestDatas.push(n)}for(t=0;t<e.DailyQuestDays.length;t++)n=e.DailyQuestDays[t],this.dailyQuestDays.push(n)},t.prototype.loadDataDaily=function(){this.listDaily.length=0;for(var e=this.dataDaily.json,t=0;t<e.length;t++){var n=e[t];this.listDaily.push(n)}},t.prototype.LoadEnemyType=function(e){var t="";switch(e){case 0:t="Prefabs/Hero/Hero";break;case 1:t="Prefabs/EnemyType/EnemyNormal";break;case 2:t="Prefabs/EnemyType/EnemySword";break;case 3:t="Prefabs/EnemyType/Archery";break;case 4:t="Prefabs/EnemyType/Demon";break;case 5:t="Prefabs/EnemyType/Chest";break;case 6:t="Prefabs/EnemyType/Dragun";break;case 7:t="Prefabs/EnemyType/Ghost";break;case 8:t="Prefabs/EnemyType/Princess";break;case 9:t="Prefabs/EnemyType/Trap";break;case 10:t="Prefabs/EnemyType/Wolf";break;case 11:t="Prefabs/EnemyType/Sword";break;case 12:t="Prefabs/EnemyType/wall";break;case 13:t="Prefabs/EnemyType/Gem";break;case 14:t="Prefabs/EnemyType/Knife";break;case 15:t="Prefabs/EnemyType/Food";break;case 16:t="Prefabs/EnemyType/Shield";break;case 17:t="Prefabs/EnemyType/Yeti";break;case 18:t="Prefabs/EnemyType/EnemyHorn";break;case 19:t="Prefabs/EnemyType/Key";break;case 20:t="Prefabs/EnemyType/Fire";break;case 21:t="Prefabs/EnemyType/Spider";break;case 22:t="Prefabs/EnemyType/Ruou";break;case 23:t="Prefabs/EnemyType/DragonGold";break;case 24:t="Prefabs/EnemyType/Boxing";break;case 25:t="Prefabs/EnemyType/Boom";break;case 26:t="Prefabs/EnemyType/PrincessLock";break;case 27:t="Prefabs/EnemyType/Bear";break;case 28:t="Prefabs/EnemyType/PoliceStick";break;case 29:t="Prefabs/EnemyType/Bow";break;case 30:t="Prefabs/EnemyType/Goblin";break;case 31:t="Prefabs/EnemyType/Kappa";break;case 32:t="Prefabs/EnemyType/Axe";break;case 33:t="Prefabs/EnemyType/Shuriken";break;case 34:t="Prefabs/EnemyType/Katana";break;case 35:t="Prefabs/EnemyType/BloodSword";break;case 36:t="Prefabs/EnemyType/Hydra"}return t},t.prototype.loadIconLevel=function(e){var t=2;switch(e){case"COLLECT GOLDS":t=0;break;case"OPEN CHEST":t=1;break;case"KILL ALL ENEMIES":t=2;break;case"KILL DRAGON":t=3;break;case"SAVE THE PRINCESS":t=4;break;case"KILL DRAGON GOLD":t=5;break;case"KILL SPIDER":t=6;break;case"KILL BEAR":t=7;break;case"KILL DEMON":t=8}return t},t.prototype.loadHeroById=function(e){return null==e&&(e=1),"Hero"+e},t.prototype.combatBySword=function(e,t,n,o){var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"Pick"),this.scheduleOnce(function(){t.node.active=!0,n.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatKnife=function(e,t,n,o){t.setSkin("Knife");var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"Pick"),this.scheduleOnce(function(){t.node.active=!0,n.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatAxe=function(e,t,n,o){t.setSkin("Axe");var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"Pick"),this.scheduleOnce(function(){t.node.active=!0,n.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatBoom=function(e,t,n,o){var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"DieFire"),this.scheduleOnce(function(){n.active=!1},1),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatShield=function(e,t,n,o){t.setSkin("Khien");var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"Pick"),this.scheduleOnce(function(){t.node.active=!0,n.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatBoxing=function(e,t,n,o){t.setSkin("Gloves");var a=0,i=0;0==o?(e.setAnimation(1,"Run",!1),i=.6,a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),this.playAnim(e,t,"Pick"),this.scheduleOnce(function(){t.node.active=!0,n.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatWall=function(e,t,n){l.AudioManager.instance.PlayPushwallblock(),t.node.active=!1,e.addAnimation(1,"HitWall",!1,.1),this.scheduleOnce(function(){n.active=!1,e.addAnimation(1,"Idle",!0,1)},.8)},t.prototype.combatBow=function(e,t,n){l.AudioManager.instance.PlayPushwallblock(),t.node.active=!1,e.addAnimation(1,"HitWall",!1,.1),this.scheduleOnce(function(){n.active=!1,e.addAnimation(1,"Idle",!0,1)},.8)},t.prototype.comBatFood=function(e,t,o,a){var i=0,r=0;0==a?(e.setAnimation(1,"Run",!1),t.setAnimation(1,"Run",!1),r=.6,i=o.position.x-e.node.x-10):(r=0,i=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(r,i,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),e.setAnimation(1,"Pick",!1),this.scheduleOnce(function(){(n.instance.haveBoxing||n.instance.haveSword||n.instance.haveShield)&&(t.node.active=!0),o.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.combatGem=function(e,t,n,o){var a=0,i=0;0==o?(i=.6,e.setAnimation(1,"Run",!1),a=n.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayOpenChest(),e.addAnimation(1,"Open2",!0,1),this.scheduleOnce(function(){n.active=!1,e.addAnimation(1,"Idle",!0,1)},1)},this)))},t.prototype.combatKey=function(e,t,o,a){var i=0,r=0;0==a?(e.setAnimation(1,"Run",!1),r=.6,i=o.position.x-e.node.x-10):(r=0,i=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(r,i,0),cc.callFunc(function(){l.AudioManager.instance.PlayHeroPickSword(),e.setAnimation(1,"Pick",!1),this.scheduleOnce(function(){(n.instance.haveBoxing||n.instance.haveSword||n.instance.haveShield)&&(t.node.active=!0),o.active=!1},.5),this.scheduleOnce(function(){t.addAnimation(1,"Idle",!0),e.addAnimation(1,"Idle",!0)},1)},this)))},t.prototype.randomHeroCombat=function(e){var t=c.Utils.randomNum(0,2);1==t?(l.AudioManager.instance.PlayPunch_1(),e.setAnimation(1,"AttackHit2",!1)):2==t?(l.AudioManager.instance.PlayPunch_2(),e.setAnimation(1,"AttackHit",!1)):(l.AudioManager.instance.PlayPunch_2(),e.setAnimation(1,"AttackHit3",!1)),e.addAnimation(1,"Idle",!0,1)},t.prototype.comBatChest=function(e,t,n,o){var a=0,i=0;0==o?(i=.6,e.setAnimation(1,"Run",!1),n.setAnimation(1,"Run",!1),a=t.node.parent.parent.position.x-e.node.x-10):(i=0,a=0),e.node.parent.parent.runAction(cc.sequence(cc.moveBy(i,a,0),cc.callFunc(function(){l.AudioManager.instance.PlayOpenChest(),e.addAnimation(1,"Open2",!0,1),this.scheduleOnce(function(){t.setAnimation(1,"Open",!1)},2)},this)))},t.prototype.comBatPrincess=function(e,t,n,o){o&&(t.node.children[0].active=!1),e.setAnimation(1,"Run",!0),n.node.active=!1,e.node.parent.parent.runAction(cc.sequence(cc.moveBy(.6,35,0),cc.callFunc(function(){l.AudioManager.instance.PlayRescuePrincess(),this.playAnim(e,n,"Sit"),this.scheduleOnce(function(){t.getComponent(sp.Skeleton).setAnimation(1,"win 2",!1)},2)},this)))},t.prototype.playAnimSword=function(e,t){t.setAnimation(1,"Attack",!1),e.setAnimation(1,"Attack",!1),t.addAnimation(1,"Idle",!0,1.2),e.addAnimation(1,"Idle",!0,1.2)},t.prototype.playAnimKnife=function(e,t){t.setAnimation(1,"AttackKnife",!1),e.setAnimation(1,"AttackKnife",!1),t.addAnimation(1,"Idle",!0,1.2),e.addAnimation(1,"Idle",!0,1.2)},t.prototype.playAnimShield=function(e,t){t.setAnimation(1,"Attack2",!1),e.setAnimation(1,"Attack2",!1),t.addAnimation(1,"Idle",!0,1.2),e.addAnimation(1,"Idle",!0,1.2)},t.prototype.playAnimBoxing=function(e,t){t.setAnimation(1,"AttackGlove",!1),e.setAnimation(1,"AttackGlove",!1),t.addAnimation(1,"Idle",!0,1.2),e.addAnimation(1,"Idle",!0,1.2)},t.prototype.playAnimAxe=function(e,t){t.setAnimation(1,"AttackAxe",!1),e.setAnimation(1,"AttackAxe",!1),t.addAnimation(1,"Idle",!0,1.2),e.addAnimation(1,"Idle",!0,1.2)},t.prototype.playAnim=function(e,t,n){null!=t&&(t.setAnimation(1,"Idle",!0),this.scheduleOnce(function(){t.setAnimation(1,n,!1)},0)),null!=e&&(e.setAnimation(1,"Idle",!0),this.scheduleOnce(function(){e.setAnimation(1,n,!1)},.5))},t.prototype.claimHeroRandom=function(){for(var e=n.instance.data_setting.listHero,t=[],o=1;o<14;o++)e.includes(o)||t.push(o);return t[c.Utils.randomNum(0,t.length-1)]},t.prototype.GetPrefabAssetByUrl=function(e,t){var o,a=n.instance.mapAssets[e];return null==a?cc.loader.loadRes(e,cc.Asset,function(e,a){if(!Array.isArray(a)){c.Utils.log("LoadingInitialization.onComplete one asset");var i=a._uuid;return a.addRef(),n.instance.mapAssets["Prefabs/EnemyType/"+a.name]=i,o=cc.assetManager.assets.get(i),t(o)}c.Utils.log("LoadingInitialization.onComplete array"+a.length)}):o=cc.assetManager.assets.get(a),t(o)},t.prototype.GetPrefabAssetlLevelCurrent=function(){var e=this,t=n.instance.data_setting.level-1,o=n.instance.listLevelData[t];null==o||o.visitTower.forEach(function(t){null!=t.enemy[0].point&&t.enemy.forEach(function(t){if(null!=t.point){var o=n.instance.LoadEnemyType(t.type);cc.resources.load(o,cc.Asset,e.onComplete.bind(e))}})})},t.prototype.onComplete=function(e,t){if(Array.isArray(t))c.Utils.log("LoadingInitialization.onComplete array"+t.length);else{c.Utils.log("LoadingInitialization.onComplete one asset");var o=t._uuid;t.addRef(),n.instance.mapAssets["Prefabs/EnemyType/"+t.name]=o}},t.prototype.numberWithCommas=function(e){e=e.toString();for(var t=/(-?\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},t.prototype.questDailyTypeCheck=function(e){var t;return null!=(t=this.dailyQuestDatas.find(function(t){return t.Type===e}))&&null!=t?t:null},t.prototype.replaceTextQuest=function(e,t){return e.replace("{}",t)},t.prototype.addcountQuest=function(e){this.data_setting.countQuest[e]+=1,c.Utils.saveData(r.default.DATA_SETTING,this.data_setting)},t.prototype.addcountAchi=function(e){this.data_setting.countAchievement[e]+=1,c.Utils.log("countAchievement "+this.data_setting.countAchievement),c.Utils.saveData(r.default.DATA_SETTING,this.data_setting)},t.prototype.checkResetDay=function(e,t){var n=new Date,o=(n.getFullYear(),n.getMonth(),n.getDate(),(new Date).setHours(23,59,59));this.schedule(function(){var n=(new Date).getTime(),a=o-n,i=Math.floor(a%864e5/36e5),r=Math.floor(a%36e5/6e4),s=Math.floor(a%6e4/1e3);function c(e){return(e<10?"0":"")+e}var l=c(i)+":"+c(r)+":"+c(s);e.string="Daily Quest will reload in: "+l,a<0&&null!=t&&t()},1,1e3,0)},t._instance=null,n=i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Unit/Constants":"Constants","../Unit/Toast":"Toast","../Unit/Utils":"Utils","./AudioManager":"AudioManager"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"940b9PjYWJGvLj58ofTVSME","GameScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=e("./EnemySlotCell"),p=e("./TargetItem"),u=e("../Controller/AudioManager"),d=e("./ResourceItem"),f=e("../Unit/Toast"),h=e("../plugins/fb/FBInstantAds"),y=cc._decorator,g=y.ccclass,m=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editBoxLevel=null,t.listTarget=[],t.listIcon=[],t.countEnemyInLevel=0,t.levelCurrent=0,t.counting=!1,t.score=0,t.speed=0,t.count=1,t}return a(t,e),t.prototype.onLoad=function(){this.gameManager=r.default.instance,this.resetData(),this.gameManager.init(this),this.loadLevel(),this.loadVisitTower(),this.loadPlayer(),u.AudioManager.instance.playMusic(),this.checkTestLevel()},t.prototype.start=function(){this.gameManager.showMaskLoading(this.maskLoading),cc.sys.os==cc.sys.OS_ANDROID&&!this.gameManager.data_setting.createShortcut&&this.gameManager.data_setting.level>=3&&(r.default.instance.fb.fireBaseLogCreateShortcut(),this.gameManager.fb.createShortcut(),this.gameManager.data_setting.createShortcut=!0,c.Utils.saveData(s.default.DATA_SETTING,this.gameManager.data_setting)),this.checkSkipBtn()},t.prototype.update=function(e){this.counting&&(this.gameManager.pointHero<500?this.speed=this.gameManager.pointHero+200:this.speed=this.gameManager.pointHero+1e3,this.score+=e*this.speed,this.score>=this.gameManager.pointHero&&(this.score=this.gameManager.pointHero,this.counting=!1,this.pointHeroLabel.string=r.default.instance.numberWithCommas(this.gameManager.pointHero.toFixed(0)).toString()),this.pointHeroLabel.string=r.default.instance.numberWithCommas(this.score.toFixed(0)).toString())},t.prototype.resetData=function(){this.cameraMain.zoomRatio=1,this.cameraMain.node.position=cc.v3(0,0,0),this.gameManager.tutorialScene=null,this.gameManager.haveSword=!1,this.gameManager.haveKnife=!1,this.gameManager.haveBoxing=!1,this.gameManager.haveShield=!1,this.gameManager.haveKey=!1,this.gameManager.isChest=!1,this.gameManager.typeGame=s.GameState.Playing,r.default.instance.addcountAchi(s.TypeAchievement.Play_500_Level)},t.prototype.loadLevel=function(){this.levelCurrent=r.default.instance.data_setting.level-1,this.levelCurrent>146&&(this.levelCurrent=c.Utils.randomNum(1,146)),this.nameLevel.string="Level "+r.default.instance.data_setting.level+" : "+this.gameManager.listLevelData[this.levelCurrent].nameLevel,this.iconLevel.spriteFrame=this.listIcon[r.default.instance.loadIconLevel(this.gameManager.listLevelData[this.levelCurrent].nameLevel)]},t.prototype.loadPlayer=function(){var e=this;cc.resources.load("Prefabs/Hero/Hero",cc.Prefab,function(t,n){e.setPlayerPrefab(n),e.setPlayerWeaponPrefab(n)})},t.prototype.setPlayerPrefab=function(e){this.player=e;var t=cc.instantiate(this.player);t.parent=this.pointHero,t.setPosition(cc.Vec3.ZERO),this.spineHero=t.getComponent(sp.Skeleton),this.spineHero.setSkin(this.gameManager.loadHeroById(r.default.instance.data_setting.idHero)),this.gameManager.pointHero=this.gameManager.listLevelData[this.levelCurrent].pointPlayer,this.pointHeroLabel.string=r.default.instance.numberWithCommas(this.gameManager.pointHero).toString(),this.spineHero.setAnimation(0,"Idle",!0)},t.prototype.setPlayerWeaponPrefab=function(e){var t=cc.instantiate(e);t.parent=this.pointHero,t.setPosition(cc.Vec3.ZERO),this.spineWeapon=t.getComponent(sp.Skeleton),this.spineWeapon.setSkin("Kiem2"),this.spineWeapon.animation="Idle",this.spineWeapon.node.active=!1},t.prototype.loadVisitTower=function(){var e=this,t=0;this.visitTower&&this.visitTower.destroyAllChildren(),this.gameManager.listLevelData[this.levelCurrent].visitTower.forEach(function(n){if(t++,null!=n.enemy[0].point){var o=cc.instantiate(e.targetPrefab);o.getComponent(p.default).Setdata(n.enemy,t),o.parent=e.visitTower,o.setPosition(cc.Vec3.ZERO),e.listTarget.push(o)}})},t.prototype.CheckPositionOnMove=function(e){for(var t,n=0;n<this.listTarget.length&&(!(t=this.listTarget[n]).active||!t.getBoundingBoxToWorld().contains(e.getBoundingBoxToWorld().center));n++)t=null;this.lastTarget&&this.lastTarget.HighLight(!1),t?(e.getComponent("DragItem").UnTarGet(),this.lastTarget=t.getComponent("TargetItem"),this.lastTarget.hasDrag||this.lastTarget==e.getComponent("DragItem").tarGetItem||this.lastTarget.HighLight(!0)):this.lastTarget=e.getComponent("DragItem").tarGetItem},t.prototype.TargetWithNode=function(e){return!!this.lastTarget&&(this.lastTarget.hasDrag?e.tarGetItem?(e.tarGetItem.DragItemWithNode(this.lastTarget.getDrag().node),this.lastTarget.DragItemWithNode(e.node)):(this.lastTarget.hasDrag&&this.lastTarget.UnDrag(),this.lastTarget.DragItemWithNode(e.node)):(this.lastTarget.DragItemWithNode(e.node),this.lastTarget=null),!0)},t.prototype.ShowComBat=function(e){this.count=1,this.battle(e)},t.prototype.battle=function(e){var t=this,n=e.length;this.count=n-1,this.schedule(function(){if(t.gameManager.typeGame!=s.GameState.GameOver){var n=e[t.count].getComponent(l.default);if(c.Utils.log("combated "+n.combated),n.combated)t.count--;else{if(n.enemyData.type==s.typeEnemy.Sword){t.gameManager.haveSword=!0,t.gameManager.combatBySword(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero+=n.enemyData.point;var o=1;o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Sword_times)}else if(n.enemyData.type==s.typeEnemy.Wall)t.gameManager.combatWall(t.spineHero,t.spineWeapon,n.node),t.gameManager.pointHero>n.enemyData.point?t.scheduleOnce(function(){t.gameManager.pointHero-=n.enemyData.point,t.pointHeroLabel.string=r.default.instance.numberWithCommas(t.gameManager.pointHero).toString()},.6):(t.gameManager.typeGame=s.GameState.GameOver,t.scheduleOnce(function(){t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.gameOver()},.5)),r.default.instance.addcountQuest(s.TypeDailyQuest.Push_Wall_Block);else if(n.enemyData.type==s.typeEnemy.Princess)t.gameManager.comBatPrincess(t.spineHero,n.spine,t.spineWeapon,!1),r.default.instance.addcountQuest(s.TypeDailyQuest.Save_the_Princess);else if(n.enemyData.type==s.typeEnemy.Kappa)n.spine.setAnimation(1,"Attack",!1),t.gameManager.pointHero>n.enemyData.point?t.scheduleOnce(function(){n.spine.setAnimation(1,"Die",!1),n.pointLabel.node.active=!1,t.gameManager.pointHero-=n.enemyData.point,t.pointHeroLabel.string=r.default.instance.numberWithCommas(t.gameManager.pointHero).toString()},.6):(t.gameManager.typeGame=s.GameState.GameOver,t.scheduleOnce(function(){t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.gameOver()},.5));else if(n.enemyData.type==s.typeEnemy.Goblin)r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Goblins),n.spine.setAnimation(1,"Attack",!1),t.gameManager.pointHero>n.enemyData.point?t.scheduleOnce(function(){n.spine.setAnimation(1,"Die",!1),n.pointLabel.node.active=!1,t.gameManager.pointHero-=n.enemyData.point,t.pointHeroLabel.string=r.default.instance.numberWithCommas(t.gameManager.pointHero).toString()},.6):(t.gameManager.typeGame=s.GameState.GameOver,t.scheduleOnce(function(){t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.gameOver()},.5));else if(n.enemyData.type==s.typeEnemy.PrincessLock){if(t.gameManager.isChest=!0,!t.gameManager.haveKey)return;t.gameManager.comBatPrincess(t.spineHero,n.spine,t.spineWeapon,!0),r.default.instance.addcountQuest(s.TypeDailyQuest.Save_the_Princess)}else if(n.enemyData.type==s.typeEnemy.Food)t.gameManager.pointHero=n.enemyData.point*t.gameManager.pointHero,t.gameManager.comBatFood(t.spineHero,t.spineWeapon,n.node,t.count),o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Food_times);else if(n.enemyData.type==s.typeEnemy.Ruou)t.gameManager.pointHero=n.enemyData.point*t.gameManager.pointHero,t.gameManager.comBatFood(t.spineHero,t.spineWeapon,n.node,t.count),o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Holy_Water);else if(n.enemyData.type==s.typeEnemy.Knife)t.gameManager.haveKnife=!0,t.gameManager.combatKnife(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero+=n.enemyData.point,o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Sword_times);else if(n.enemyData.type==s.typeEnemy.Axe)t.gameManager.haveAxe=!0,t.gameManager.combatAxe(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero+=n.enemyData.point,o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o);else if(n.enemyData.type==s.typeEnemy.Boom)t.gameManager.combatBoom(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero=t.gameManager.pointHero*n.enemyData.point,o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o);else if(n.enemyData.type==s.typeEnemy.Shield)t.gameManager.haveShield=!0,t.gameManager.combatShield(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero+=n.enemyData.point,o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Shield_times);else if(n.enemyData.type==s.typeEnemy.Boxing)t.gameManager.haveBoxing=!0,t.gameManager.combatBoxing(t.spineHero,t.spineWeapon,n.node,t.count),t.gameManager.pointHero+=n.enemyData.point,o=1,o=1==t.count?.6:1.2,t.updatePointPlayer(o),r.default.instance.addcountQuest(s.TypeDailyQuest.Get_Gloves_times);else if(n.enemyData.type==s.typeEnemy.Chest){if(t.gameManager.isChest=!0,!t.gameManager.haveKey)return;t.gameManager.comBatChest(t.spineHero,n.spine,t.spineWeapon,t.count),r.default.instance.addcountQuest(s.TypeDailyQuest.Open_the_Treasure)}else n.enemyData.type==s.typeEnemy.Gold?t.gameManager.combatGem(t.spineHero,t.spineWeapon,n.node,t.count):n.enemyData.type==s.typeEnemy.Bow?(n.spine.setAnimation(1,"animation",!1),t.scheduleOnce(function(){n.pointLabel.node.active=!1,n.spine.node.active=!1},.6),t.gameManager.pointHero>n.enemyData.point?t.scheduleOnce(function(){t.gameManager.pointHero-=n.enemyData.point,t.pointHeroLabel.string=r.default.instance.numberWithCommas(t.gameManager.pointHero).toString()},.6):(t.gameManager.typeGame=s.GameState.GameOver,t.scheduleOnce(function(){t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.gameOver()},.5))):n.enemyData.type==s.typeEnemy.Trap?(n.spine.setAnimation(1,"Attack",!1),t.scheduleOnce(function(){n.pointLabel.node.active=!1,n.spine.node.active=!1},.6),t.gameManager.pointHero>n.enemyData.point?t.scheduleOnce(function(){t.gameManager.pointHero-=n.enemyData.point,t.pointHeroLabel.string=r.default.instance.numberWithCommas(t.gameManager.pointHero).toString()},.6):(t.gameManager.typeGame=s.GameState.GameOver,t.scheduleOnce(function(){t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.gameOver()},.5))):n.enemyData.type==s.typeEnemy.Key?(t.spineWeapon.node.active=!1,t.gameManager.haveKey=!0,t.gameManager.combatKey(t.spineHero,t.spineWeapon,n.node,t.count)):(t.scheduleOnce(function(){n.spine.setAnimation(1,"Attack",!1),t.gameManager.haveSword?(u.AudioManager.instance.PlaySword_Attack_2(),t.gameManager.playAnimSword(t.spineHero,t.spineWeapon)):t.gameManager.haveKnife?(u.AudioManager.instance.PlaySword_Attack_2(),t.gameManager.playAnimKnife(t.spineHero,t.spineWeapon)):t.gameManager.haveShield?(u.AudioManager.instance.PlaySword_Attack_2(),t.gameManager.playAnimShield(t.spineHero,t.spineWeapon)):t.gameManager.haveBoxing?(u.AudioManager.instance.PlaySword_Attack_2(),t.gameManager.playAnimBoxing(t.spineHero,t.spineWeapon)):t.gameManager.haveAxe?(u.AudioManager.instance.PlaySword_Attack_2(),t.gameManager.playAnimAxe(t.spineHero,t.spineWeapon)):(t.spineWeapon.node.active=!1,t.gameManager.randomHeroCombat(t.spineHero))},.1),t.gameManager.pointHero>n.enemyData.point?(n.enemyData.type==s.typeEnemy.Ghost?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Ghosts):n.enemyData.type==s.typeEnemy.Goblin?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Goblins):n.enemyData.type==s.typeEnemy.Wolf?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Wolves):n.enemyData.type==s.typeEnemy.Fire?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Firelords):n.enemyData.type==s.typeEnemy.Dragun?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Dragons):n.enemyData.type==s.typeEnemy.Bear?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Bears):n.enemyData.type==s.typeEnemy.Demon?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Demons):n.enemyData.type==s.typeEnemy.PoliceStick?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Zombies):n.enemyData.type==s.typeEnemy.Spider?r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Spiders):n.enemyData.type==s.typeEnemy.DragonGold&&r.default.instance.addcountQuest(s.TypeDailyQuest.Kill_Golden_Dragons),t.scheduleOnce(function(){u.AudioManager.instance.PlayEnemyDie(),n.spine.setAnimation(1,"Die",!1),n.pointLabel.node.active=!1,t.score=t.gameManager.pointHero,t.gameManager.pointHero+=n.enemyData.point,t.updatePointPlayer(),n.checkCombat()},.7)):(t.gameManager.typeGame=s.GameState.GameOver,u.AudioManager.instance.PlayHeroDie(),t.gameManager.playAnim(t.spineHero,t.spineWeapon,"Die"),t.spineWeapon.node.active=!1,t.scheduleOnce(function(){t.gameOver()},2),u.AudioManager.instance.PlayEnemyHit()));t.gameManager.isChest=!1,c.Utils.log("Chest : "+t.gameManager.isChest),t.countEnemyInLevel--,t.countEnemyInLevel<=0&&t.gameManager.typeGame!=s.GameState.GameOver&&t.scheduleOnce(function(){t.victory()},2),t.count--}}},1,n-1,1)},t.prototype.victory=function(){this.gameManager.addcountQuest(s.TypeDailyQuest.Win_levels),this.watchVideoBtn.active=!1,u.AudioManager.instance.PlayWin(),this.gameManager.data_setting.gold+=Math.round(100),this.zoomCamera(),this.victoryPopup.active=!0,this.spineHero.setAnimation(1,"Win",!0),(this.gameManager.haveSword||this.gameManager.haveKnife||this.gameManager.haveShield||this.gameManager.haveBoxing||this.gameManager.haveAxe)&&this.spineWeapon.setAnimation(1,"Win",!0),this.pointHeroLabel.node.active=!1,c.Utils.saveData(s.default.DATA_SETTING,this.gameManager.data_setting),s.default.ADS?(h.FBInstantAds.isRewardedVideoReady?this.watchVideoBtn.active=!0:this.watchVideoBtn.active=!1,r.default.instance.fb.subscribeMessengerBot()):this.watchVideoBtn.active=!1},t.prototype.checkSkipBtn=function(){s.default.ADS?(this.skipBtn.active=!1,h.FBInstantAds.isRewardedVideoReady?this.skipBtn.active=!0:this.skipBtn.active=!1):this.skipBtn.active=!1},t.prototype.gameOver=function(){u.AudioManager.instance.PlayLose(),this.zoomCamera(),this.gameOverPopup.active=!0},t.prototype.onRestartButtonClicked=function(){cc.director.loadScene("GameScene")},t.prototype.onNextLevelButtonClicked=function(){this.gameManager.data_setting.level=this.gameManager.data_setting.level+1,c.Utils.saveData(s.default.DATA_SETTING,this.gameManager.data_setting),u.AudioManager.instance.pauseMusic(),s.default.ADS?h.FBInstantAds.showInterstitialAd(function(){u.AudioManager.instance.resumeMusic(),cc.director.loadScene("GameScene")}):(u.AudioManager.instance.resumeMusic(),cc.director.loadScene("GameScene"))},t.prototype.OnSKipLevelBtnClicked=function(){var e=this;this.skipBtn.active=!1,u.AudioManager.instance.pauseMusic(),h.FBInstantAds.showRewardedVideoAd(function(t){u.AudioManager.instance.resumeMusic(),t?e.onNextLevelButtonClicked():(c.Utils.log("ko xem video"),e.checkSkipBtn())})},t.prototype.OnGoToHomeBtnClicked=function(){cc.director.loadScene(s.default.HOME_SCENE)},t.prototype.OnBackLevelBtnClicked=function(){var e=this.levelCurrent;r.default.instance.data_setting.level=e,c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),cc.director.loadScene("GameScene")},t.prototype.changeTower=function(){cc.tween(this.lastPos.node).to(.3,{scale:0}).start(),cc.instantiate(this.homeTowerCell).parent=this.homeTower},t.prototype.watchVideoAds500=function(){var e=this;this.watchVideoBtn.active=!1,u.AudioManager.instance.pauseMusic(),h.FBInstantAds.showRewardedVideoAd(function(t){u.AudioManager.instance.resumeMusic(),t?(r.default.instance.data_setting.gold+=500,c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),e.resourceUI.updateUI()):c.Utils.log("ko xem video"),e.watchVideoBtn.active=!1})},t.prototype.zoomCamera=function(){var e=this;this.cameraMain.node.setParent(this.pointHero),this.cameraMain.node.position=new cc.Vec3(this.pointHero.position.x+40,this.pointHero.position.y+120,0),this.schedule(function(){e.cameraMain.zoomRatio+=.1},0,10,0)},t.prototype.updatePointPlayer=function(e){var t=this;void 0===e&&(e=0),this.scheduleOnce(function(){t.counting=!0},e)},t.prototype.goToScene=function(){var e=parseInt(this.editBoxLevel.string);Number.isInteger(e)?(this.gameManager.data_setting.level=e,e<=this.gameManager.listLevelData.length?cc.director.loadScene(s.default.GAME_SCENE):f.Toast.instance.showText("Level \u0111ang ph\xe1t tri\u1ec3n !")):f.Toast.instance.showText("Xin nh\u1eadp level \u0111\xfang !")},t.prototype.checkTestLevel=function(){(s.default.DEV||0xe1795f8442652==r.default.instance.fb.fbId)&&(this.testLevel.active=!0)},i([m(cc.EditBox)],t.prototype,"editBoxLevel",void 0),i([m(d.default)],t.prototype,"resourceUI",void 0),i([m(cc.SpriteFrame)],t.prototype,"listIcon",void 0),i([m(cc.Node)],t.prototype,"watchVideoBtn",void 0),i([m(cc.Node)],t.prototype,"skipBtn",void 0),i([m(cc.Node)],t.prototype,"gameOverPopup",void 0),i([m(cc.Node)],t.prototype,"victoryPopup",void 0),i([m(cc.Node)],t.prototype,"visitTower",void 0),i([m(cc.Node)],t.prototype,"homeTower",void 0),i([m(cc.Prefab)],t.prototype,"homeTowerCell",void 0),i([m(cc.Node)],t.prototype,"pointHero",void 0),i([m(cc.Prefab)],t.prototype,"targetPrefab",void 0),i([m(cc.Label)],t.prototype,"pointHeroLabel",void 0),i([m(cc.Label)],t.prototype,"nameLevel",void 0),i([m(cc.Node)],t.prototype,"maskLoading",void 0),i([m(cc.Camera)],t.prototype,"cameraMain",void 0),i([m(cc.Node)],t.prototype,"testLevel",void 0),i([m(cc.Sprite)],t.prototype,"iconLevel",void 0),i([g],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Toast":"Toast","../Unit/Utils":"Utils","../plugins/fb/FBInstantAds":"FBInstantAds","./EnemySlotCell":"EnemySlotCell","./ResourceItem":"ResourceItem","./TargetItem":"TargetItem"}],GameTracking:[function(e,t,n){"use strict";cc._RF.push(t,"3cdce238o1AYa7iveGlHdJU","GameTracking"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameTracking=void 0;var o=e("../firebase/FirebaseTracking"),a=e("../gameanalytics/GATracking"),i=function(){function e(){}return e.logEvent=function(e,t){o.FirebaseTracking.logEvent(e,t)},e.logEventPlayLevel=function(e,t){o.FirebaseTracking.logEventPlayLevel(e,t)},e.logEventUnlockSkin=function(e){o.FirebaseTracking.logEventUnlockSkin(e)},e.logEventCreateShortCut=function(e){o.FirebaseTracking.logEventCreateShortCut(e)},e.logEventInviteFriend=function(e){o.FirebaseTracking.logEventInviteFriend(e)},e.logEventShareGame=function(e){o.FirebaseTracking.logEventShareGame(e)},e.logEventQuitGame=function(e){o.FirebaseTracking.logEventQuitGame(e)},e.logEventAdLoadFailed=function(e,t){o.FirebaseTracking.logEventAdLoadFailed(e,t)},e.logEventShowAdFailed=function(e){o.FirebaseTracking.logEventShowAdFailed(e)},e.logEventShowAd=function(e){o.FirebaseTracking.logEventShowAd(e)},e.logEventOptinMessage=function(e){o.FirebaseTracking.logEventOptinMessage(e)},e.logEventUserFromAd=function(e){o.FirebaseTracking.logEventUserFromAd(e),a.GATracking.logEventUserFromAd(e)},e}();n.GameTracking=i,cc._RF.pop()},{"../firebase/FirebaseTracking":"FirebaseTracking","../gameanalytics/GATracking":"GATracking"}],HeroClaimPopup:[function(e,t,n){"use strict";cc._RF.push(t,"fc758hwP3pO+Y4hF5ezwqT6","HeroClaimPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/AudioManager"),s=e("../Controller/GameManager"),c=e("../plugins/fb/FBInstantAds"),l=e("../Unit/Constants"),p=e("../Unit/Utils"),u=cc._decorator,d=u.ccclass,f=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineHero=null,t.idClaim=0,t.continueBtn=null,t}return a(t,e),t.prototype.onLoad=function(){this.idClaim=s.default.instance.claimHeroRandom(),this.spineHero.setSkin(s.default.instance.loadHeroById(this.idClaim)),this.spineHero.setAnimation(1,"Idle",!0)},t.prototype.claimBtn=function(){var e=this;l.default.ADS?(r.AudioManager.instance.pauseMusic(),c.FBInstantAds.showRewardedVideoAd(function(t){r.AudioManager.instance.resumeMusic(),t?(s.default.instance.data_setting.listHero.push(e.idClaim),s.default.instance.data_setting.idHero=e.idClaim,s.default.instance.data_setting.numberSkinPieces=0,s.default.instance.addcountAchi(l.TypeAchievement.Own_5_skins),p.Utils.saveData(l.default.DATA_SETTING,s.default.instance.data_setting),e.node.active=!1):(p.Utils.log("ko xem video"),e.node.active=!1,s.default.instance.data_setting.numberSkinPieces=0)})):(s.default.instance.data_setting.listHero.push(this.idClaim),s.default.instance.data_setting.idHero=this.idClaim,s.default.instance.data_setting.numberSkinPieces=0,s.default.instance.addcountAchi(l.TypeAchievement.Own_5_skins),p.Utils.saveData(l.default.DATA_SETTING,s.default.instance.data_setting),this.node.active=!1),this.continueBtn.active=!0},t.prototype.closeBtn=function(){s.default.instance.data_setting.numberSkinPieces=0,p.Utils.saveData(l.default.DATA_SETTING,s.default.instance.data_setting),this.continueBtn.active=!0,this.node.active=!1},i([f(cc.Prefab)],t.prototype,"heroPrefab",void 0),i([f(sp.Skeleton)],t.prototype,"spineHero",void 0),i([f(cc.Node)],t.prototype,"continueBtn",void 0),i([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils","../plugins/fb/FBInstantAds":"FBInstantAds"}],HeroItemCell:[function(e,t,n){"use strict";cc._RF.push(t,"1dcc8UFMpRHNIEzKLxjD47H","HeroItemCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/AudioManager"),s=e("../Controller/GameManager"),c=e("../plugins/fb/FBInstantAds"),l=e("../Unit/Constants"),p=e("../Unit/Utils"),u=cc._decorator,d=u.ccclass,f=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listButton=[],t}return a(t,e),t.prototype.setData=function(e,t){this.resourceItem=t,this.hero=e,this.loadPlayer(),1==e.priceType?(this.listButton[1].active=!0,l.default.ADS||(this.listButton[1].active=!1)):2==e.priceType?(this.listButton[0].active=!0,this.priceLabel.string=e.heroPrice.toString(),s.default.instance.data_setting.gold<e.heroPrice&&this.imgBuy.setMaterial(0,this.materialGray)):3==e.priceType?this.listButton[2].active=!0:4==e.priceType&&(this.listButton[3].active=!0),s.default.instance.data_setting.listHero.includes(e.heroId)&&this.listButton.forEach(function(e){e.active=!1})},t.prototype.loadPlayer=function(){var e=this;cc.resources.load("Prefabs/Hero/Hero",cc.Prefab,function(t,n){e.setPlayerPrefab(n)})},t.prototype.setPlayerPrefab=function(e){this.player=e;var t=cc.instantiate(this.player);t.scale=.6,t.parent=this.pointHero,t.setPosition(cc.Vec3.ZERO);var n=t.getComponent(sp.Skeleton);n.setSkin(s.default.instance.loadHeroById(this.hero.heroId)),n.setAnimation(0,"Idle",!0)},t.prototype.onButtonClicked=function(){s.default.instance.data_setting.listHero.includes(this.hero.heroId)&&(s.default.instance.data_setting.idHero=this.hero.heroId,s.default.instance.shopHero.showHero())},t.prototype.onBuyBtnClicked=function(){s.default.instance.data_setting.gold>=this.hero.heroPrice&&(s.default.instance.data_setting.gold-=this.hero.heroPrice,this.resourceItem.updateUI(),this.saveHero(this.hero.heroId))},t.prototype.saveHero=function(e){s.default.instance.data_setting.idHero=e,s.default.instance.data_setting.listHero.push(e),p.Utils.saveData(l.default.DATA_SETTING,s.default.instance.data_setting),s.default.instance.data_setting.listHero.includes(e)&&this.listButton.forEach(function(e){e.active=!1}),s.default.instance.addcountAchi(l.TypeAchievement.Own_5_skins),p.Utils.saveData(l.default.DATA_SETTING,s.default.instance.data_setting),s.default.instance.shopHero.showHero()},t.prototype.onWatchVideoClicked=function(){var e=this;r.AudioManager.instance.pauseMusic(),c.FBInstantAds.showRewardedVideoAd(function(t){r.AudioManager.instance.resumeMusic(),t?e.saveHero(e.hero.heroId):console.log("ko xem video")})},t.prototype.onDailyClicked=function(){s.default.instance.homeScene.onDailyBtn()},t.prototype.OnAchiClicked=function(){s.default.instance.homeScene.onQuestBtn()},i([f(cc.Node)],t.prototype,"pointHero",void 0),i([f(cc.Sprite)],t.prototype,"imgBuy",void 0),i([f(cc.Label)],t.prototype,"priceLabel",void 0),i([f(cc.Material)],t.prototype,"materialGray",void 0),i([f(cc.Node)],t.prototype,"listButton",void 0),i([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils","../plugins/fb/FBInstantAds":"FBInstantAds"}],HeroItem:[function(e,t,n){"use strict";cc._RF.push(t,"c5fc87lV51Pg7va4R0SMo18","HeroItem");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HeroItem=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return o([i],e)}());n.HeroItem=r,cc._RF.pop()},{}],HeroShopPopup:[function(e,t,n){"use strict";cc._RF.push(t,"cf9c5PKbyVL8YJN6HKsVBx2","HeroShopPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("./HeroItemCell"),c=e("./ResourceItem"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineHero=null,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this.idHero=r.default.instance.data_setting.idHero,this.gridHero.destroyAllChildren(),r.default.instance.listHeroData.forEach(function(t){var n=cc.instantiate(e.heroItemCellPrefab);n.getComponent(s.default).setData(t,e.resourceUI),n.parent=e.gridHero}),this.setPlayerPrefab(this.heroPrefab)},t.prototype.start=function(){r.default.instance.initShopHero(this)},t.prototype.setPlayerPrefab=function(e){this.player=e;var t=cc.instantiate(this.player);t.scale=.8,t.parent=this.pointHeroCurrent,t.setPosition(cc.Vec3.ZERO),this.spineHero=t.getComponent(sp.Skeleton),this.spineHero.setSkin(r.default.instance.loadHeroById(this.idHero)),this.spineHero.setAnimation(1,"Idle",!0)},t.prototype.onBackHomeBtn=function(){this.node.active=!1,r.default.instance.homeScene.setSkinHero(this.idHero)},t.prototype.showHero=function(){this.idHero=r.default.instance.data_setting.idHero,this.spineHero.setSkin(r.default.instance.loadHeroById(this.idHero)),this.spineHero.setAnimation(1,"Idle",!0)},i([u(c.default)],t.prototype,"resourceUI",void 0),i([u(cc.Node)],t.prototype,"gridHero",void 0),i([u(cc.Node)],t.prototype,"pointHeroCurrent",void 0),i([u(cc.Prefab)],t.prototype,"heroPrefab",void 0),i([u(cc.Prefab)],t.prototype,"heroItemCellPrefab",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","./HeroItemCell":"HeroItemCell","./ResourceItem":"ResourceItem"}],HomeScene:[function(e,t,n){"use strict";cc._RF.push(t,"4519ff6USpDHo33bre33aRO","HomeScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/AudioManager"),s=e("../Controller/GameManager"),c=e("../GA/GA"),l=e("../plugins/fb/FBInstantAds"),p=e("../Unit/Constants"),u=e("../Unit/Utils"),d=e("./ResourceItem"),f=cc._decorator,h=f.ccclass,y=f.property,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this.initData_Facebook(),s.default.instance.showMaskLoading(this.maskLoading)},t.prototype.start=function(){cc.tween(this.playBtn).repeatForever(cc.tween().to(1,{scale:1.2}).to(1,{scale:1})).start(),s.default.instance.haveSword=!1,s.default.instance.haveKnife=!1,s.default.instance.haveAxe=!1,s.default.instance.haveBoxing=!1,s.default.instance.haveShield=!1,this.levelLabel.string="Level "+s.default.instance.data_setting.level,s.default.instance.initHomeScene(this),this.loadPlayer();var e=s.default.instance.fb.getCustomData();e&&e.fb_instant_game_ad_id&&c.default.pushAdEvent(e.fb_instant_game_ad_id)},t.prototype.loadPlayer=function(){this.idHero=s.default.instance.data_setting.idHero,this.setPlayerPrefab(this.heroPrefab)},t.prototype.setSkinHero=function(e){this.spineHero.setSkin(s.default.instance.loadHeroById(e)),this.spineHero.setAnimation(0,"Idle",!0),this.resourceUI.updateUI()},t.prototype.setPlayerPrefab=function(e){var t=cc.instantiate(e);t.scale=.8,t.parent=this.pointHero,t.setPosition(cc.Vec3.ZERO),this.spineHero=t.getComponent(sp.Skeleton),this.spineHero.setSkin(s.default.instance.loadHeroById(this.idHero)),this.spineHero.setAnimation(0,"Idle",!0)},t.prototype.onPlaySceneBtn=function(){p.default.DEV?s.default.instance.loadScene(p.default.GAME_SCENE,this.preloadPrefab):s.default.instance.data_setting.tutorial?s.default.instance.loadScene(p.default.GAME_SCENE,this.preloadPrefab):s.default.instance.loadScene(p.default.TUTORIAL_SCENE,this.preloadPrefab)},t.prototype.onAddGoldBtn=function(){},t.prototype.onNoAdsBtn=function(){},t.prototype.onSettingBtn=function(){this.settingPopup.active=!0},t.prototype.onDailyBtn=function(){this.dailyPopup.active=!0},t.prototype.onCastleBtn=function(){this.worldPopup.active=!0},t.prototype.onSkinBtn=function(){this.skinPopup.active=!0},t.prototype.onLibraryBtn=function(){this.libraryPopup.active=!0},t.prototype.onQuestBtn=function(){this.questPopup.active=!0},t.prototype.onShareFBBtn=function(){s.default.instance.fb.shareAsync(),s.default.instance.fb.fireBaseLogInvite()},t.prototype.onCreateShortCut=function(){s.default.instance.fb.createShortcut()},t.prototype.onResetGame=function(){cc.sys.localStorage.clear(),(new Date).getTime(),s.default.instance.data_setting=new s.Data_Setting,u.Utils.saveData(p.default.DATA_SETTING,s.default.instance.data_setting)},t.prototype.initData_Facebook=function(){var e=this;if(!s.default.instance.fistInitData){s.default.instance.data_setting=u.Utils.readData(p.default.DATA_SETTING),u.Utils.log(s.default.instance.data_setting),r.AudioManager.instance.load(function(){r.AudioManager.instance.playHomeMusic()}),s.default.instance.loadResourceLevel(function(){s.default.instance.GetPrefabAssetlLevelCurrent()}),s.default.instance.loadResourceHero(function(){}),s.default.instance.loadResourceDaily(function(){}),s.default.instance.loadAchievementQuestData(function(){}),s.default.instance.loadDailyQuestData(function(){});var t=this.fbManager.getComponent("FBManager");t.getAvatar(),t.getData(),p.default.TEST?p.default.DEV=!0:(s.default.instance.fb=t,s.default.instance.fistInitData=!0,t.getInstanceRemoteConfig(),s.default.instance.fb.getDataPlayer(function(){e.spineHero.setSkin(s.default.instance.loadHeroById(s.default.instance.data_setting.idHero)),e.levelLabel.string="Level "+s.default.instance.data_setting.level,l.FBInstantAds.lastLevelShowAds=s.default.instance.data_setting.level,e.resourceUI.updateUI()}),l.FBInstantAds.adsConfig=window.adsConfig,l.FBInstantAds.preloadInterstitialAd(),l.FBInstantAds.preloadRewardedVideoAd()),0xe1795f8442652==t.fbId&&(p.default.DEV=!0,cc.debug.setDisplayStats(!0),this.test.active=!0),u.Utils.log(t.fbId)}},t.prototype.onComplete=function(e,t){if(Array.isArray(t))u.Utils.log("LoadingInitialization.onComplete array"+t.length);else{u.Utils.log("LoadingInitialization.onComplete one asset");var n=t._uuid;t.addRef(),s.default.instance.mapAssets["Prefabs/EnemyType/"+t.name]=n}},t.prototype.resetDev=function(){s.default.instance.data_setting=new s.Data_Setting,u.Utils.saveData(p.default.DATA_SETTING,s.default.instance.data_setting)},i([y(cc.Node)],t.prototype,"maskLoading",void 0),i([y(cc.Prefab)],t.prototype,"heroPrefab",void 0),i([y(d.default)],t.prototype,"resourceUI",void 0),i([y(cc.Node)],t.prototype,"skinPopup",void 0),i([y(cc.Node)],t.prototype,"pointHero",void 0),i([y(cc.Node)],t.prototype,"settingPopup",void 0),i([y(cc.Node)],t.prototype,"dailyPopup",void 0),i([y(cc.Node)],t.prototype,"castlePopup",void 0),i([y(cc.Node)],t.prototype,"libraryPopup",void 0),i([y(cc.Node)],t.prototype,"questPopup",void 0),i([y(cc.Node)],t.prototype,"worldPopup",void 0),i([y(cc.Label)],t.prototype,"levelLabel",void 0),i([y(cc.Node)],t.prototype,"playBtn",void 0),i([y(cc.Node)],t.prototype,"fbManager",void 0),i([y(cc.Prefab)],t.prototype,"preloadPrefab",void 0),i([y(cc.Node)],t.prototype,"test",void 0),i([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../GA/GA":"GA","../Unit/Constants":"Constants","../Unit/Utils":"Utils","../plugins/fb/FBInstantAds":"FBInstantAds","./ResourceItem":"ResourceItem"}],HomeTowerCell:[function(e,t,n){"use strict";cc._RF.push(t,"9b8b8PwX3VB+4poCQYvy0bb","HomeTowerCell");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isScale=!0,t}return a(t,e),t.prototype.onLoad=function(){this.isScale&&cc.tween(this.node).to(.3,{scale:0}).to(.3,{scale:1}).start()},i([c(Boolean)],t.prototype,"isScale",void 0),i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],IHash:[function(e,t,n){"use strict";cc._RF.push(t,"6d64bqhVihOSKEVuM9Dhe25","IHash"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],InfoLibraryPopup:[function(e,t,n){"use strict";cc._RF.push(t,"dc276FAh09JVahZw4sf8Rrx","InfoLibraryPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLb=null,t.level=null,t.nodeSpawn=null,t}return a(t,e),t.prototype.setData=function(e){this.nameLb.string=""+s.LibraryData[e].name,this.level.string="Lv "+s.LibraryData[e].level,this.loadChar(e)},t.prototype.loadChar=function(e){var t=this;this.type=s.LibraryData[e].type,this.nodeSpawn.destroyAllChildren();var n=r.default.instance.LoadEnemyType(s.LibraryData[e].type);r.default.instance.GetPrefabAssetByUrl(n,function(e){null!=e&&t.setEnemyPrefab(e)})},t.prototype.setEnemyPrefab=function(e){var t=cc.instantiate(e);t.parent=this.nodeSpawn,this.type!=s.typeEnemy.Axe&&t.setPosition(0,0,0)},t.prototype.onBackBtn=function(){this.node.active=!1},i([p(cc.Label)],t.prototype,"nameLb",void 0),i([p(cc.Label)],t.prototype,"level",void 0),i([p(cc.Node)],t.prototype,"nodeSpawn",void 0),i([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants"}],LevelItem:[function(e,t,n){"use strict";cc._RF.push(t,"a6986El589EG6lry4AOqfEu","LevelItem"),Object.defineProperty(n,"__esModule",{value:!0}),n.enemySlot=void 0;var o=cc._decorator,a=(o.ccclass,o.property,function(){});n.enemySlot=a,cc._RF.pop()},{}],LibraryItem:[function(e,t,n){"use strict";cc._RF.push(t,"aa10dt7GdtNOZGD3okl7NE5","LibraryItem");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLock=!0,t}return a(t,e),t.prototype.setData=function(e,t){this._callback=t,this._index=e,null!=s.LibraryData[this._index]&&(this._level=s.LibraryData[this._index].level,this.isLock=r.default.instance.data_setting.level<this._level,this.isLock&&this.loadLock())},t.prototype.onClick=function(){null!=this._callback&&this._callback(this._index,this.isLock)},t.prototype.loadLock=function(){var e=this;cc.resources.load("Prefabs/Items/LibraryLock",cc.Prefab,function(t,n){e.setLibraryLock(n)})},t.prototype.setLibraryLock=function(e){var t=cc.instantiate(e);t.parent=this.node,t.setPosition(cc.Vec3.ZERO),t.getComponent("LibraryLock").setData(this._level)},i([l],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants"}],LibraryLock:[function(e,t,n){"use strict";cc._RF.push(t,"8994bMFMB5FnruymirXzIgs","LibraryLock");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setData=function(e){this.levelLb.string="lv:"+e},i([c(cc.Label)],t.prototype,"levelLb",void 0),i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],LibraryPopup:[function(e,t,n){"use strict";cc._RF.push(t,"bc23cdu6YpKLJDCVYMCBsJJ","LibraryPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("./InfoLibraryPopup"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listItem=[],t}return a(t,e),t.prototype.onEnable=function(){this.getDataUI()},t.prototype.getDataUI=function(){var e=this;this.listItem.length>0&&(this.listItem.length=0),this.listItem=this.root.getComponentsInChildren("LibraryItem");for(var t=0;t<this.listItem.length;t++)this.listItem[t].getComponent("LibraryItem").setData(t,function(t,n){e.loadChar(t,n)})},t.prototype.loadChar=function(e,t){var n=this;if(t)this.infoLibraryPopup.node.active=!0,this.infoLibraryPopup.setData(e);else{this.nameChar.string=s.LibraryData[e].name,this.description.string=s.LibraryData[e].description,this.type=s.LibraryData[e].type,this.pointSpaw.destroyAllChildren();var o=r.default.instance.LoadEnemyType(s.LibraryData[e].type);r.default.instance.GetPrefabAssetByUrl(o,function(e){null!=e&&n.setEnemyPrefab(e)})}},t.prototype.setEnemyPrefab=function(e){var t=cc.instantiate(e);t.parent=this.pointSpaw,this.type!=s.typeEnemy.Axe&&t.setPosition(0,0,0)},t.prototype.onBackBtn=function(){this.node.active=!1},i([u(cc.Label)],t.prototype,"nameChar",void 0),i([u(cc.Label)],t.prototype,"description",void 0),i([u(cc.Node)],t.prototype,"root",void 0),i([u(cc.Node)],t.prototype,"pointSpaw",void 0),i([u(c.default)],t.prototype,"infoLibraryPopup",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","./InfoLibraryPopup":"InfoLibraryPopup"}],LoadBackGround:[function(e,t,n){"use strict";cc._RF.push(t,"d54a9j92HBGXKwo/szHQl4X","LoadBackGround");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Unit/Utils"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backGrounds=[],t}return a(t,e),t.prototype.start=function(){var e=r.Utils.randomNum(0,this.backGrounds.length-1);this.backGrounds[e].active=!0},i([l(cc.Node)],t.prototype,"backGrounds",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Unit/Utils":"Utils"}],LoadingPopup:[function(e,t,n){"use strict";cc._RF.push(t,"1c75f56oyRPh5UkAXzEvr+i","LoadingPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.loading=null,t.nodeMask=null,t}return a(t,e),t.prototype.onEnable=function(){this.node.active=!0,console.log(this.node.active),this.nodeMask.scale=1,this.nodeMask.opacity=255,cc.tween(this.nodeMask).to(2,{opacity:0}).to(0,{scale:0}).start()},t.prototype.onDisable=function(){this.nodeMask.scale=1,r.default.instance.hideLoading()},i([l(cc.Label)],t.prototype,"label",void 0),i([l(cc.Node)],t.prototype,"loading",void 0),i([l(cc.Node)],t.prototype,"nodeMask",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],LoadingScene:[function(e,t,n){"use strict";cc._RF.push(t,"8850fjzEq1H4IGEXeVgfSrY","LoadingScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],NotificationCenter:[function(e,t,n){"use strict";cc._RF.push(t,"88208ZoUAVLgbTgBoRh1U/v","NotificationCenter");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.EventObj=n.NotificationCenter=void 0;var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.listeners=[]}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),e.prototype.hasEventListener=function(e,t){for(var n=!1,o=0;o<this.listeners.length;o++)this.listeners[o].type===e&&this.listeners[o].listener===t&&(n=!0);return n},e.prototype.AddObserver=function(e,t,n){this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,scope:n})},e.prototype.RemoveObserver=function(e,t){for(var n=0;n<this.listeners.length;n++)this.listeners[n].type===e&&this.listeners[n].listener===t&&this.listeners.splice(n,1)},e.prototype.PostNotification=function(e){for(var t=0;t<this.listeners.length;t++)this.listeners[t].type===e.getType()&&this.listeners[t].listener.apply(this.listeners[t].scope,e.getParams())},e._instance=null,t=o([i],e)}());n.NotificationCenter=r;var s=function(){function e(e,t){this.type=e,this.params=t}return e.prototype.getParams=function(){return this.params},e.prototype.getType=function(){return this.type},e}();n.EventObj=s,cc._RF.pop()},{}],Overlay:[function(e,t,n){"use strict";cc._RF.push(t,"30712MsFNdGpLmE7gDQUKNy","Overlay");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()})},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.node.off(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()})},i([r],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],PersistNode:[function(e,t,n){"use strict";cc._RF.push(t,"d1938YDc2ZLzJmCooYRAJk1","PersistNode");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],PlatformMotion:[function(e,t){"use strict";cc._RF.push(t,"839c3kVYuxHoowZ6OJNjkBa","PlatformMotion"),cc.Class({extends:cc.Component,properties:{speed:10,distance:200},onLoad:function(){this._movedDistance=this.distance,this._direction=1,this._movedDiff=0},update:function(e){var t=this.speed*this._direction*e;this._movedDistance+=Math.abs(t),this._movedDistance>this.distance&&(t=0,this._movedDistance=0,this._direction*=1,this.node.x=-150),this.node.x+=t,this._movedDiff=t}}),cc._RF.pop()},{}],Popup:[function(e,t,n){"use strict";cc._RF.push(t,"72d73+6UiRLuqDPBamfMgZ8","Popup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/AudioManager"),s=e("../Controller/GameManager"),c=e("../Unit/Constants"),l=e("../Unit/Utils"),p=cc._decorator,u=p.ccclass,d=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sound=null,t.muteAll=null,t}return a(t,e),t.prototype.onEnable=function(){this.updateUI()},t.prototype.updateUI=function(){this.sound&&(this.sound.isChecked=s.default.instance.data_setting.muteSound),this.muteAll&&(this.muteAll.isChecked=s.default.instance.data_setting.mute)},t.prototype.onCloseClicked=function(){this.node.active=!1},t.prototype.onMuteAllClicked=function(){var e=s.default.instance.data_setting.mute;s.default.instance.data_setting.mute=!e,this.muteAll.isChecked=!e,l.Utils.saveData(c.default.DATA_SETTING,s.default.instance.data_setting),s.default.instance.data_setting.mute?r.AudioManager.instance.pauseMusic():r.AudioManager.instance.resumeHomeMusic()},t.prototype.onMuteSoundClicked=function(){var e=s.default.instance.data_setting.muteSound;s.default.instance.data_setting.muteSound=!e,this.sound.isChecked=!e,s.default.instance.data_setting.muteSound?r.AudioManager.instance.pauseMusic():r.AudioManager.instance.resumeHomeMusic(),l.Utils.saveData(c.default.DATA_SETTING,s.default.instance.data_setting)},i([d(cc.Toggle)],t.prototype,"sound",void 0),i([d(cc.Toggle)],t.prototype,"muteAll",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],QuestPopup:[function(e,t,n){"use strict";cc._RF.push(t,"9807ajTzV9Dyq/DOlFbpOVn","QuestPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../UI/ResourceItem"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onBackBtn=function(){this.node.active=!1,this.resourceUI.updateUI()},t.prototype.onDailyQuestActive=function(){this.dailyQuestPopup.active=!0,this.achievementsPopup.active=!1},t.prototype.onAchievementsActive=function(){this.dailyQuestPopup.active=!1,this.achievementsPopup.active=!0},i([l(cc.Node)],t.prototype,"dailyQuestPopup",void 0),i([l(cc.Node)],t.prototype,"achievementsPopup",void 0),i([l(r.default)],t.prototype,"resourceUI",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../UI/ResourceItem":"ResourceItem"}],ResourceItem:[function(e,t,n){"use strict";cc._RF.push(t,"b0916oo3slNaJ5BNFoQf9js","ResourceItem");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.updateUI()},t.prototype.updateUI=function(){this.itemLabel.string=r.default.instance.data_setting.gold.toString()},t.prototype.addCoinBtn=function(){},i([l(cc.Label)],t.prototype,"itemLabel",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],SettingItem:[function(e,t,n){"use strict";cc._RF.push(t,"743bbdBq4dHbqm5FuoVi9gL","SettingItem");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/AudioManager"),s=e("../Controller/GameManager"),c=e("../Unit/Constants"),l=e("../Unit/Utils"),p=cc._decorator,u=p.ccclass,d=p.property,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this.on.active=s.default.instance.data_setting.mute,this.off.active=!s.default.instance.data_setting.mute},t.prototype.toggle=function(){s.default.instance.data_setting.mute?(this.on.active=!1,this.off.active=!0,s.default.instance.data_setting.mute=!1,r.AudioManager.instance.resumeMusic()):(this.on.active=!0,this.off.active=!1,s.default.instance.data_setting.mute=!0,r.AudioManager.instance.pauseMusic()),l.Utils.saveData(c.default.DATA_SETTING,s.default.instance.data_setting)},i([d(cc.Node)],t.prototype,"on",void 0),i([d(cc.Node)],t.prototype,"off",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Controller/AudioManager":"AudioManager","../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],SignalBinding:[function(e,t,n){"use strict";cc._RF.push(t,"91a82N6BUxLcpXD1eLpAheI","SignalBinding"),Object.defineProperty(n,"__esModule",{value:!0}),n.SignalBinding=void 0;var o=function(){function e(e,t,n,o,a){void 0===a&&(a=0),this.active=!0,this.params=null,this._listener=t,this._isOnce=n,this.context=o,this._signal=e,this.priority=a||0}return e.prototype.execute=function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},e.prototype.detach=function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},e.prototype.isBound=function(){return!!this._signal&&!!this._listener},e.prototype.isOnce=function(){return this._isOnce},e.prototype.getListener=function(){return this._listener},e.prototype.getSignal=function(){return this._signal},e.prototype._destroy=function(){delete this._signal,delete this._listener,delete this.context},e.prototype.toString=function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"},e}();n.SignalBinding=o,cc._RF.pop()},{}],Signal:[function(e,t,n){"use strict";cc._RF.push(t,"f764eBK1WFJL4czP7HqDZdR","Signal"),Object.defineProperty(n,"__esModule",{value:!0}),n.Signal=void 0;var o=e("./SignalBinding"),a=function(){function e(){this._bindings=[],this._prevParams=null,this.memorize=!1,this._shouldPropagate=!0,this.active=!0}return e.prototype.validateListener=function(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},e.prototype._registerListener=function(e,t,n,a){var i,r=this._indexOfListener(e,n);if(-1!==r){if((i=this._bindings[r]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else i=new o.SignalBinding(this,e,t,n,a),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},e.prototype._addBinding=function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e.priority<=this._bindings[t].priority);this._bindings.splice(t+1,0,e)},e.prototype._indexOfListener=function(e,t){for(var n,o=this._bindings.length;o--;)if((n=this._bindings[o]).getListener()===e&&n.context===t)return o;return-1},e.prototype.has=function(e,t){return void 0===t&&(t=null),-1!==this._indexOfListener(e,t)},e.prototype.add=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=0),this.validateListener(e,"add"),this._registerListener(e,!1,t,n)},e.prototype.addOnce=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=0),this.validateListener(e,"addOnce"),this._registerListener(e,!0,t,n)},e.prototype.remove=function(e,t){void 0===t&&(t=null),this.validateListener(e,"remove");var n=this._indexOfListener(e,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},e.prototype.removeAll=function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},e.prototype.getNumListeners=function(){return this._bindings.length},e.prototype.halt=function(){this._shouldPropagate=!1},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.active){var n,o=this._bindings.length;if(this.memorize&&(this._prevParams=e),o){n=this._bindings.slice(0),this._shouldPropagate=!0;do{o--}while(n[o]&&this._shouldPropagate&&!1!==n[o].execute(e))}}},e.prototype.forget=function(){this._prevParams=null},e.prototype.dispose=function(){this.removeAll(),delete this._bindings,delete this._prevParams},e.prototype.toString=function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"},e.VERSION="1.0.0",e}();n.Signal=a,cc._RF.pop()},{"./SignalBinding":"SignalBinding"}],TargetItem:[function(e,t,n){"use strict";cc._RF.push(t,"ec8d11xXTdG6oMRtX3uLj5w","TargetItem");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Utils"),c=e("./EnemySlotCell"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listBattleCell=new Array,t._index=0,t._hasDrag=!1,t}return a(t,e),Object.defineProperty(t.prototype,"hasDrag",{get:function(){return 1==this.pointSpawnPlayer.childrenCount},enumerable:!1,configurable:!0}),t.prototype.Setdata=function(e,t){var n=this;e.length<=0||(this.enemysBattle=e,e.forEach(function(e){var t=cc.instantiate(n.enemySlotPrefab),o=t.getComponent(c.default);o.setData(e),t.parent=n.gridEnemy,t.setPosition(cc.Vec3.ZERO),null!=o.enemyData.point&&n.listBattleCell.push(t)}),this._index=t)},t.prototype.start=function(){},t.prototype.HighLight=function(e){void 0===e&&(e=!0),this.highLightObj.active=!!e},t.prototype.DragItemWithNode=function(e){this.HighLight(!1),e.parent=this.pointSpawnPlayer;var t=cc.tween;e.position=new cc.Vec3(-20,50,0),t(e).to(.5,{position:cc.v3(-20,0,0)}).start();var n=e.getComponent("DragItem");null!=r.default.instance.game&&(n&&(n.tarGetItem=this,(null==r.default.instance.game.lastPos||null==r.default.instance.game.lastPos||null!=r.default.instance.game.lastPos&&r.default.instance.game.lastPos._index!=this._index)&&(n.DisableDrag(),r.default.instance.game.ShowComBat(this.listBattleCell),this.scheduleOnce(this.callbackFinishCombat,2))),null!=r.default.instance.game.lastPos&&r.default.instance.game.lastPos._index!=this._index&&(r.default.instance.isChest||r.default.instance.game.changeTower(),s.Utils.log(r.default.instance.isChest)),r.default.instance.game.lastPos=this),null!=r.default.instance.tutorialScene&&(this.getDrag().DisableDrag(),r.default.instance.tutorialScene.ShowComBat())},t.prototype.UnDrag=function(){var e;this.hasDrag&&(e=this.pointSpawnPlayer.children[0].getComponent("DragItem"))&&(e.UnTarGet(),e.MoveToBegin())},t.prototype.getDrag=function(){return this.hasDrag?this.pointSpawnPlayer.children[0].getComponent("DragItem"):null},t.prototype.callbackFinishCombat=function(){this.getDrag().EnaBledDrag()},i([u(cc.Node)],t.prototype,"gridEnemy",void 0),i([u(cc.Node)],t.prototype,"pointSpawnPlayer",void 0),i([u(cc.Prefab)],t.prototype,"enemySlotPrefab",void 0),i([u(cc.Node)],t.prototype,"highLightObj",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Utils":"Utils","./EnemySlotCell":"EnemySlotCell"}],Toast:[function(e,t,n){"use strict";cc._RF.push(t,"c64ebl/r5tAX7QIY1Ipt1oY","Toast"),Object.defineProperty(n,"__esModule",{value:!0}),n.Toast=void 0;var o=function(){function e(){this.toastNode=null,this.textNode=null,this.textLabel=null,this.canvas=null,this.BG_COLOR=new cc.Color(0,0,0,200),this.toastNode=new cc.Node,this.toastNode.active=!1,this.toastNode.zIndex=1e4,this.canvas=cc.director.getScene().getComponentInChildren(cc.Canvas),this.canvas.node.addChild(this.toastNode),this.toastNode.height=70,this.toastNode.width=400;var e=this.toastNode.getComponent(cc.Graphics);e||(e=this.toastNode.addComponent(cc.Graphics)),e.rect(-this.toastNode.width/2,-this.toastNode.height/2,this.toastNode.width,this.toastNode.height),e.fillColor=this.BG_COLOR,e.fill();var t=this.toastNode.getComponent(cc.Layout);t||(t=this.toastNode.addComponent(cc.Layout)),t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.paddingBottom=10,this.textNode=new cc.Node,this.toastNode.addChild(this.textNode),this.textLabel=this.textNode.addComponent(cc.Label),this.textLabel.fontSize=25,this.textLabel.lineHeight=30,this.textLabel.horizontalAlign=cc.Label.HorizontalAlign.CENTER}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.clear=function(){this._instance=null},e.prototype.showText=function(e,t){var n=this;void 0===t&&(t=2.5),this.textLabel.string=e,this.toastNode.active=!0,this.toastNode.opacity=255;var o=cc.winSize.height;this.toastNode.setPosition(cc.v2(0,-o/2+80)),this.toastNode.runAction(cc.sequence(cc.delayTime(t),cc.fadeOut(.2),cc.callFunc(function(){n.toastNode.active=!1},this)))},e._instance=null,e}();n.Toast=o,cc._RF.pop()},{}],TutorialScene:[function(e,t,n){"use strict";cc._RF.push(t,"d88easi3TZLT6+q0l2ybQZp","TutorialScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Controller/AudioManager"),s=e("../../Controller/GameManager"),c=e("../../Unit/Constants"),l=e("../../Unit/Utils"),p=cc._decorator,u=p.ccclass,d=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listTarget=[],t.listArrow=[],t.listRound2=[],t}return a(t,e),t.prototype.start=function(){var e=this;this.gameManager=s.default.instance,this.gameManager.initTutorial(this),this.gameManager.game=null,this.schedule(function(){e.spawArrow()},2,1e3,0)},t.prototype.CheckPositionOnMove=function(e){for(var t,n=0;n<this.listTarget.length&&(!(t=this.listTarget[n]).active||!t.getBoundingBoxToWorld().contains(e.getBoundingBoxToWorld().center));n++)t=null;this.lastTarget&&this.lastTarget.HighLight(!1),t?(e.getComponent("DragItem").UnTarGet(),this.lastTarget=t.getComponent("TargetItem"),this.lastTarget.hasDrag||this.lastTarget==e.getComponent("DragItem").tarGetItem||this.lastTarget.HighLight(!0)):this.lastTarget=e.getComponent("DragItem").tarGetItem},t.prototype.onTouchCheck=function(){this.round1.active=!1},t.prototype.TargetWithNode=function(e){return!!this.lastTarget&&(this.lastTarget.hasDrag?e.tarGetItem?(e.tarGetItem.DragItemWithNode(this.lastTarget.getDrag().node),this.lastTarget.DragItemWithNode(e.node)):(this.lastTarget.hasDrag&&this.lastTarget.UnDrag(),this.lastTarget.DragItemWithNode(e.node)):(this.lastTarget.DragItemWithNode(e.node),this.lastTarget=null),!0)},t.prototype.ShowComBat=function(){this.checkRound()},t.prototype.checkRound=function(){this.round1.active=!1,this.round2.active=!0,this.listRound2.forEach(function(e,t){setTimeout(function(){e.active=!0},500*t)})},t.prototype.battle=function(){var e=this;this.mask.active=!1,this.round1.active=!1,this.round2.active=!1,this.spineEnemy.setAnimation(1,"Attack",!0),this.gameManager.randomHeroCombat(this.spineHero),this.scheduleOnce(function(){r.AudioManager.instance.PlayEnemyDie(),e.spineEnemy.setAnimation(1,"Die",!1)},.7),this.scheduleOnce(function(){e.victory()},1.5)},t.prototype.victory=function(){r.AudioManager.instance.PlayWin(),this.gameManager.data_setting.gold+=Math.round(100),this.gameManager.data_setting.tutorial=!0,l.Utils.saveData(c.default.DATA_SETTING,this.gameManager.data_setting),this.zoomCamera(),this.victoryPopup.active=!0,this.spineHero.setAnimation(1,"Win",!0)},t.prototype.zoomCamera=function(){var e=this;this.cameraMain.node.setParent(this.pointHero),this.cameraMain.node.position=new cc.Vec3(this.pointHero.position.x+40,this.pointHero.position.y,0),this.schedule(function(){e.cameraMain.zoomRatio+=.1},0,10,0)},t.prototype.spawArrow=function(){this.listArrow.forEach(function(e){e.active=!1}),this.listArrow.forEach(function(e,t){setTimeout(function(){e.active=!0},150*t)})},t.prototype.onStart=function(){cc.director.loadScene(c.default.GAME_SCENE)},i([d(cc.Node)],t.prototype,"listTarget",void 0),i([d(sp.Skeleton)],t.prototype,"spineHero",void 0),i([d(sp.Skeleton)],t.prototype,"spineEnemy",void 0),i([d(cc.Node)],t.prototype,"round1",void 0),i([d(cc.Node)],t.prototype,"round2",void 0),i([d(cc.Node)],t.prototype,"tutoPopup",void 0),i([d(cc.Node)],t.prototype,"mask",void 0),i([d(cc.Camera)],t.prototype,"cameraMain",void 0),i([d(cc.Node)],t.prototype,"victoryPopup",void 0),i([d(cc.Node)],t.prototype,"pointHero",void 0),i([d(cc.Node)],t.prototype,"listArrow",void 0),i([d(cc.Node)],t.prototype,"listRound2",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Controller/AudioManager":"AudioManager","../../Controller/GameManager":"GameManager","../../Unit/Constants":"Constants","../../Unit/Utils":"Utils"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"c76546tJgNOSqkAUFmvt0d8","Utils");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var a=e("./Constants"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){}var t;return t=e,e.log=function(e){a.default.DEV&&console.log(e)},e.randomNum=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.readData=function(e){var n=cc.sys.localStorage.getItem(e);return t.log("data "+n),null!=n?JSON.parse(n):{mute:!1,muteSound:!1,listHero:[1],idHero:1,gold:0,level:1,timeStart:(new Date).getTime(),dailyCheck:[0],numberSkinPieces:0,tutorial:!1,createShortcut:!1}},e.saveData=function(e,t){a.default.TEST||cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.parseQueryString=function(e){e||(e=window.location.search.substring(1));var t={};return e.split("&").forEach(function(e){var n=e.split("="),o=decodeURIComponent(n[0]),a=decodeURIComponent(n.length>1?n[1]:"");t[o]=a}),t},e.unixTimeStampToDateTime=function(e){var t=new Date(e),n="0"+t.getDate(),o="0"+(t.getMonth()+1),a=t.getFullYear(),i=t.getHours(),r="0"+t.getMinutes(),s="0"+t.getSeconds(),c=t.getMilliseconds();return a+"-"+o.substr(-2)+"-"+n.substr(-2)+" "+i+":"+r.substr(-2)+":"+s.substr(-2)+":"+c},e.diffDay=function(e){var t=(new Date).getTime()-e;return Math.floor(t/1e3/60/60/24)+1},t=o([r],e)}());n.Utils=s,cc._RF.pop()},{"./Constants":"Constants"}],VictoryPopup:[function(e,t,n){"use strict";cc._RF.push(t,"bd058A3t6tDp5aKpCtGdvKm","VictoryPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../Unit/Constants"),c=e("../Unit/Utils"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnable=function(){var e=this;r.default.instance.data_setting.numberSkinPieces+=10,null!=this.sliderSkin&&(this.sliderSkin.progress=r.default.instance.data_setting.numberSkinPieces/100),c.Utils.saveData(s.default.DATA_SETTING,r.default.instance.data_setting),r.default.instance.data_setting.numberSkinPieces>=100&&r.default.instance.data_setting.listHero.length<13?null!=this.skinClaimPopup&&this.scheduleOnce(function(){e.skinClaimPopup.active=!0},1):null!=this.continueBtn&&(this.continueBtn.active=!0)},i([u(cc.ProgressBar)],t.prototype,"sliderSkin",void 0),i([u(cc.Node)],t.prototype,"skinClaimPopup",void 0),i([u(cc.Node)],t.prototype,"continueBtn",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}],WorldCollectPopup:[function(e,t,n){"use strict";cc._RF.push(t,"34a8dtGGUhDarQKOfHDm+FE","WorldCollectPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Unit/Constants"),s=e("./WorldCollect"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listWorldCollect=[],t}return a(t,e),t.prototype.onEnable=function(){this.loadUI()},t.prototype.loadUI=function(){for(var e=this,t=0;t<r.listWorld.length;t++)this.listWorldCollect[t].getComponent("WorldCollect").setData(r.listWorld[t],function(t){e.onVisitClicked(t)})},t.prototype.onVisitClicked=function(){this.node.active=!1},t.prototype.onBackBtn=function(){this.node.active=!1},i([p(s.default)],t.prototype,"listWorldCollect",void 0),i([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Unit/Constants":"Constants","./WorldCollect":"WorldCollect"}],WorldCollect:[function(e,t,n){"use strict";cc._RF.push(t,"47bce3zJfZOJIZft9MhLUTC","WorldCollect");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setData=function(e,t){this._callback=t,this.name=e.name,this.levelUnlock.string="  Level "+e.levelUnlock;var n=r.default.instance.data_setting.level>=e.levelUnlock;this.visitBtn.active=n,this.lockBtn.active=!n},t.prototype.onClickVisitBtn=function(){null!=this._callback&&this._callback(this.name)},i([l(cc.Label)],t.prototype,"levelUnlock",void 0),i([l(cc.Node)],t.prototype,"visitBtn",void 0),i([l(cc.Node)],t.prototype,"lockBtn",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],WorldPopup:[function(e,t,n){"use strict";cc._RF.push(t,"3ce1b5Q1hBLfJbKq7Tv/WqI","WorldPopup");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){r.default.instance.initWorldPopup(this)},t.prototype.loadWorld=function(){},t.prototype.buildCastle=function(e){this.world.getComponent("World").onBuildCastle(e)},t.prototype.openCastlePopup=function(){this.castlePopup.active=!0},t.prototype.openWorldCollectPopup=function(){this.worldCollectPopup.active=!0},t.prototype.onBackBtn=function(){this.node.active=!1},i([l(cc.Node)],t.prototype,"castlePopup",void 0),i([l(cc.Node)],t.prototype,"worldCollectPopup",void 0),i([l(cc.Node)],t.prototype,"world",void 0),i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameManager":"GameManager"}],World:[function(e,t,n){"use strict";cc._RF.push(t,"e8674/JPktLRpFP94uARjj6","World");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Controller/GameManager"),s=e("../UI/ResourceItem"),c=e("../Unit/Constants"),l=e("../Unit/Utils"),p=cc._decorator,u=p.ccclass,d=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listCastle=[],t.hammer=null,t}return a(t,e),t.prototype.onEnable=function(){this.loadCastle()},t.prototype.loadCastle=function(){for(var e,t=function(t){var o=r.default.instance.data_setting.caslteEarth[t];if(o>0){n.listCastle[t].node.active=!0,e=n;var a="Map/Earth/earth-"+(t+1)+o;cc.loader.loadRes(a,cc.SpriteFrame,function(n,o){null!=o&&(e.listCastle[t].spriteFrame=o)})}else n.listCastle[t].node.active=!1},n=this,o=0;o<this.listCastle.length;o++)t(o)},t.prototype.onBuildCastle=function(e){var t=this;this.hammer.active=!0,this.hammer.setPosition(this.listCastle[e].node.position),this.scheduleOnce(function(){t.hammer.active=!1;var n=t,o=r.default.instance.data_setting.caslteEarth[e];r.default.instance.data_setting.caslteEarth[e]+=1,l.Utils.saveData(c.default.DATA_SETTING,r.default.instance.data_setting);var a="Map/Earth/earth-"+(e+1)+(o+1);cc.loader.loadRes(a,cc.SpriteFrame,function(t,o){null!=o&&(n.listCastle[e].spriteFrame=o),n.listCastle[e].node.active=!0,n.resourceItem.updateUI()})},2)},i([d(cc.Sprite)],t.prototype,"listCastle",void 0),i([d(cc.Node)],t.prototype,"hammer",void 0),i([d(s.default)],t.prototype,"resourceItem",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Controller/GameManager":"GameManager","../UI/ResourceItem":"ResourceItem","../Unit/Constants":"Constants","../Unit/Utils":"Utils"}]},{},["AnimHammer","Castle","CastleCell","CastlePopup","World","WorldCollect","WorldCollectPopup","WorldPopup","AudioManager","GameController","GameManager","NotificationCenter","DailyItem","EnemyItem","HeroItem","LevelItem","FBManager","FBServices","GA","IHash","InfoLibraryPopup","LibraryItem","LibraryLock","LibraryPopup","AchievementCell","AchievementItem","AchievementPopup","DailyQuestCell","DailyQuestDataItem","DailyQuestDayItem","DailyQuestPopup","QuestPopup","AnimPopup","DailyItemCell","DailyPopup","DragItem","EnemySlotCell","GameScene","HeroClaimPopup","HeroItemCell","HeroShopPopup","HomeScene","HomeTowerCell","LoadBackGround","LoadingPopup","LoadingScene","PersistNode","Popup","ResourceItem","SettingItem","TargetItem","TutorialScene","VictoryPopup","Config","Constants","Overlay","PlatformMotion","Toast","Utils","Signal","SignalBinding","GUIUtil","FBInstantAds","FBInstantData","FBInstantGames","FirebaseTracking","GATracking","GameTracking"]);